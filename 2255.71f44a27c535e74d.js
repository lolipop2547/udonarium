(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2255],{2255:(de,me,fe)=>{fe(9993),Opal.modules["i18n/backend/fallbacks"]=function(r){var U,c,L,A,I,o,M=[],t=r.nil,d=r.$$$,e=r.module,p=r.class_variable_set,E=r.truthy,B=r.class_variable_get,a=r.def,z=r.send,Y=r.to_a,D=r.rb_minus,P=r.send2,H=r.find_super,F=r.hash2,N=r.find_block_super,j=r.neqeq;return U=M,o=[I=e(M[0],"I18n")].concat(U),p(o[0],"@@fallbacks",t),c=r.get_singleton_class(I),L=[c].concat(o),A=r.$r(L),a(c,"$fallbacks",function(){var b=t;return p(L[1],"@@fallbacks",E(null!=L[1].$$cvars["@@fallbacks"]?"class variable":t)&&E(b=B(L[1],"@@fallbacks",!1))?b:d(d(A("I18n"),"Locale"),"Fallbacks").$new()),E(b=A("Thread").$current()["$[]"]("i18n_fallbacks"))?b:B(L[1],"@@fallbacks",!1)},0),a(c,"$fallbacks=",function(m){var b;return p(L[1],"@@fallbacks",E(m["$is_a?"](A("Array")))?d(d(A("I18n"),"Locale"),"Fallbacks").$new(m):m),b=["i18n_fallbacks",B(L[1],"@@fallbacks",!1)],z(A("Thread").$current(),"[]=",Y(b)),b[D(b.length,1)]},1),function(c,R){var m,b,y,_,A=[e(c,"Backend")].concat(R);return m=A,y=[b=e(A[0],"Fallbacks")].concat(m),_=r.$r(y),a(b,"$translate",function f(l,i,u){try{var n=f.$$p||t,s=this,g=t,S=t;return delete f.$$p,null==u&&(u=_("EMPTY_HASH")),E(u.$fetch("fallback",!0))?E(u["$[]"]("fallback_in_progress"))?P(s,H(s,"translate",f,!1,!0),"translate",[l,i,u],n):(E(u["$[]"]("default"))&&(g=s["$extract_non_symbol_default!"](u)),S=u.$merge(F(["fallback_in_progress"],{fallback_in_progress:!0})),z(_("I18n").$fallbacks()["$[]"](l),"each",[],function v(T){var C=null==v.$$s?this:v.$$s;null==T&&(T=t);try{return z(C,"catch",["exception"],function G(){var $=null==G.$$s?this:G.$$s,Z=t;if(Z=P($,N($,"translate",G.$$def||v.$$def||f,!1,!1),"translate",[T,i,S],null),E(Z["$nil?"]()))return t;j(l.$to_s(),T.$to_s())&&$.$on_fallback(l,T,i,u),r.ret(Z)},{$$arity:0,$$s:C})}catch(G){if(!r.rescue(G,[d(_("I18n"),"InvalidLocale")]))throw G;try{return t}finally{r.pop_exception()}}},{$$arity:1,$$s:s}),E(u["$key?"]("default"))&&E(u["$[]"]("default")["$nil?"]())?t:E(g)?P(s,H(s,"translate",f,!1,!0),"translate",[l,t,u.$merge(F(["default"],{default:g}))],null):s.$throw("exception",d(_("I18n"),"MissingTranslation").$new(l,i,u))):P(s,H(s,"translate",f,!1,!0),"translate",[l,i,u],n)}catch(v){if(v===r.returner)return v.$v;throw v}},-3),a(b,"$extract_non_symbol_default!",function(l){var u,i=t,n=t;return i=[l["$[]"]("default")].$flatten(),u=z(i,"detect",[],function(g){return null==g&&(g=t),g["$is_a?"](_("Symbol"))["$!"]()},1),E(u)&&(n=["default",i["$[]"](0,i.$index(u))],z(l,"[]=",Y(n)),D(n.length,1)),u},1),a(b,"$exists?",function f(l,i,u){try{var n=f.$$p||t,s=this;return delete f.$$p,null==u&&(u=_("EMPTY_HASH")),E(u.$fetch("fallback",!0))?(z(_("I18n").$fallbacks()["$[]"](l),"each",[],function g(S){var v=null==g.$$s?this:g.$$s;null==S&&(S=t);try{if(!E(P(v,N(v,"exists?",g.$$def||f,!1,!1),"exists?",[S,i],null)))return t;r.ret(!0)}catch(T){if(!r.rescue(T,[d(_("I18n"),"InvalidLocale")]))throw T;try{return t}finally{r.pop_exception()}}},{$$arity:1,$$s:s}),!1):P(s,H(s,"exists?",f,!1,!0),"exists?",[l,i,u],n)}catch(g){if(g===r.returner)return g.$v;throw g}},-3),b.$private(),a(b,"$on_fallback",function(l,i,u,n){return t},4)}(o[0],o)},Opal.modules["bcdice/randomizer"]=function(r){var I,h,m,b,y,_,c,R,M=[],t=r.nil,d=r.$$$,p=r.klass,E=r.const_set,B=r.def,a=r.truthy,z=r.rb_gt,Y=r.rb_plus,D=r.rb_le,P=r.send,H=r.rb_minus,F=r.eqeq,N=r.rb_times,j=r.eqeqeq,Q=r.rb_ge;return I=M,c=[(0,r.module)(M[0],"BCDice")].concat(I),R=r.$r(c),h=c,b=[m=p(c[0],null,"Randomizer")].concat(h),y=r.$r(b),(_=m.$$prototype).rand_results=_.detailed_rand_results=t,E(b[0],"UPPER_LIMIT_DICE_TIMES",200),E(b[0],"UPPER_LIMIT_DICE_SIDES",1e3),E(b[0],"UPPER_LIMIT_RANDS",1e4),B(m,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]},0),m.$attr_reader("rand_results"),m.$attr_reader("detailed_rand_results"),E(b[0],"DetailedRandResult",y("Struct").$new("kind","sides","value")),B(m,"$roll_barabara",function(l,i){var u=this;return a(z(Y(u.rand_results.$size(),l),y("UPPER_LIMIT_RANDS")))&&u.$raise(y("TooManyRandsError")),a(D(l,0))||a(z(l,y("UPPER_LIMIT_DICE_TIMES")))?[]:P(y("Array"),"new",[l],function n(){return(null==n.$$s?this:n.$$s).$roll_once(i)},{$$arity:0,$$s:u})},2),B(m,"$roll_sum",function(l,i){return this.$roll_barabara(l,i).$sum()},2),B(m,"$roll_once",function(l){var u=t;return a(D(l,0))||a(z(l,y("UPPER_LIMIT_DICE_SIDES")))?0:(u=this.$rand_inner(l),this.$push_to_detail("normal",l,u),u)},1),B(m,"$roll_index",function(l){return H(this.$roll_once(l),1)},1),B(m,"$roll_tens_d10",function(){var u,i=t;return i=this.$rand_inner(10),F(i,10)&&(i=0),u=N(i,10),this.$push_to_detail("tens_d10",10,u),u},0),B(m,"$roll_d9",function(){var i;return i=H(this.$rand_inner(10),1),this.$push_to_detail("d9",10,i),i},0),B(m,"$roll_d66",function(l){var n,u=t;return u=P(y("Array"),"new",[2],function s(){return(null==s.$$s?this:s.$$s).$roll_once(6)},{$$arity:0,$$s:this}),j(d(y("D66SortType"),"ASC"),n=l)?u["$sort!"]():j(d(y("D66SortType"),"DESC"),n)&&u["$sort!"]()["$reverse!"](),Y(N(u["$[]"](0),10),u["$[]"](1))},1),m.$private(),B(m,"$rand_inner",function(l){var u,i=this;return a(Q(i.rand_results.$size(),y("UPPER_LIMIT_RANDS")))&&i.$raise(y("TooManyRandsError")),u=i.$random(l),i.rand_results["$<<"]([u,l]),u},1),B(m,"$random",function(l){return Y(y("Kernel").$rand(l),1)},1),B(m,"$push_to_detail",function(l,i,u){var s;return s=y("DetailedRandResult").$new(l,i,u),this.detailed_rand_results.$push(s)},3),p(c[0],R("StandardError"),"TooManyRandsError"),t},Opal.modules["bcdice/dice_table/roll_result"]=function(r){var a,P,Q,U,I,o,c,F,Y,M=[],t=r.nil,d=r.module,e=r.klass,p=r.def,E=r.truthy;return a=M,P=Y=[d(M[0],"BCDice")].concat(a),Q=F=[d(Y[0],"DiceTable")].concat(P),I=[U=e(F[0],null,"RollResult")].concat(Q),o=r.$r(I),(c=U.$$prototype).table_name=c.value=c.body=t,p(U,"$initialize",function(L,A,h){var m=this;return m.table_name=L,m.value=A,m.body=h},3),U.$attr_reader("table_name"),U.$attr_reader("value"),U.$attr_reader("body"),p(U,"$to_s",function(){var L=this;return L.table_name+"("+L.value+") \uff1e "+L.body},0),p(U,"$last_body",function(){var L=this;return E(L.body["$is_a?"](o("RollResult")))?L.body.$last_body():L.body},0),p(U,"$empty?",function(){return!1},0)},Opal.modules["bcdice/dice_table/chain_table"]=function(r){var z,H,U,I,o,c,R,N,D,M=[],t=r.nil,d=r.module,e=r.klass,p=r.truthy,E=r.def,B=r.rb_minus;return z=M,H=D=[d(M[0],"BCDice")].concat(z),U=N=[d(D[0],"DiceTable")].concat(H),o=[I=e(N[0],null,"ChainTable")].concat(U),c=r.$r(o),(R=I.$$prototype).times=R.sides=R.items=R.name=t,E(I,"$initialize",function(A,h,m){var b=this,y=t;return b.name=A,b.items=m.$freeze(),y=/(\d+)D(\d+)/i.$match(h),p(y)||b.$raise(c("ArgumentError"),"Unexpected table type: "+h),b.times=y["$[]"](1).$to_i(),b.sides=y["$[]"](2).$to_i()},3),E(I,"$roll",function(A){var m,b,h=this,y=t;return m=A.$roll_sum(h.times,h.sides),b=B(m,h.times),y=h.items["$[]"](b),p(y["$respond_to?"]("roll"))&&(y=y.$roll(A)),c("RollResult").$new(h.name,m,y)},1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(r){var P,j,c,R,L,A,h,U,F,M=[],t=r.nil,d=r.module,e=r.klass,p=r.hash2,E=r.defs,B=r.def,a=r.rb_plus,z=r.rb_times,Y=r.rb_minus;return P=M,j=F=[d(M[0],"BCDice")].concat(P),c=U=[d(F[0],"DiceTable")].concat(j),L=[R=e(U[0],null,"D66GridTable")].concat(c),A=r.$r(L),(h=R.$$prototype).name=h.items=t,E(R,"$from_i18n",function(b,y){var f=t;return f=A("I18n").$t(b,p(["locale","raise"],{locale:y,raise:!0})),this.$new(f["$[]"]("name"),f["$[]"]("items"))},2),B(R,"$initialize",function(b,y){return this.name=b,this.items=y.$freeze()},2),B(R,"$roll",function(b){var _,f,l,i,u;return _=b.$roll_once(6),f=b.$roll_once(6),l=a(z(_,10),f),i=Y(_,1),u=Y(f,1),A("RollResult").$new(this.name,l,this.items["$[]"](i)["$[]"](u))},1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(r){var Y,F,o,c,R,L,j,Q,P,t=[],d=r.nil,e=r.module,p=r.klass,E=r.hash2,B=r.defs,a=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),Y=t,F=P=[e(t[0],"BCDice")].concat(Y),j=[e(P[0],"DiceTable")].concat(F),Q=r.$r(j),o=j,R=[c=p(j[0],Q("D66GridTable"),"D66HalfGridTable")].concat(o),L=r.$r(R),B(c,"$from_i18n",function(h,m){var y=d;return y=L("I18n").$t(h,E(["locale","raise"],{locale:m,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2_3"),y["$[]"]("items_4_5_6"))},2),a(c,"$initialize",function(h,m,b){return this.name=h,this.items=[m,m,m,b,b,b].$freeze()},3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(r){var Y,F,o,c,R,L,j,Q,P,t=[],d=r.nil,e=r.module,p=r.klass,E=r.hash2,B=r.defs,a=r.def;return r.top.$require("bcdice/dice_table/d66_grid_table"),Y=t,F=P=[e(t[0],"BCDice")].concat(Y),j=[e(P[0],"DiceTable")].concat(F),Q=r.$r(j),o=j,R=[c=p(j[0],Q("D66GridTable"),"D66OneThirdTable")].concat(o),L=r.$r(R),B(c,"$from_i18n",function(h,m){var y=d;return y=L("I18n").$t(h,E(["locale","raise"],{locale:m,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2"),y["$[]"]("items_3_4"),y["$[]"]("items_5_6"))},2),a(c,"$initialize",function(h,m,b,y){return this.name=h,this.items=[m,m,b,b,y,y].$freeze()},4)},Opal.modules["bcdice/dice_table/d66_table"]=function(r){var F,U,L,A,h,m,b,o,j,M=[],t=r.nil,d=r.$$$,e=r.module,p=r.klass,E=r.hash2,B=r.defs,a=r.def,z=r.eqeqeq,Y=r.rb_plus,D=r.rb_times,P=r.truthy;return F=M,U=j=[e(M[0],"BCDice")].concat(F),L=o=[e(j[0],"DiceTable")].concat(U),h=[A=p(o[0],null,"D66Table")].concat(L),m=r.$r(h),(b=A.$$prototype).sort_type=b.items=b.name=t,B(A,"$from_i18n",function(_,f){var u,i=t;return i=m("I18n").$t(_,E(["locale"],{locale:f})),u=m("D66SortType").$const_get(i["$[]"]("d66_sort_type")),this.$new(i["$[]"]("name"),u,i["$[]"]("items"))},2),a(A,"$initialize",function(_,f,l){var i=this;return i.name=_,i.sort_type=f,i.items=l.$freeze()},3),a(A,"$roll",function(_){var f=this,l=t,i=t,u=t,n=t;return l=_.$roll_barabara(2,6),z(d(m("D66SortType"),"ASC"),i=f.sort_type)?l["$sort!"]():z(d(m("D66SortType"),"DESC"),i)&&l["$sort!"]()["$reverse!"](),u=Y(D(l["$[]"](0),10),l["$[]"](1)),n=P(i=f.items["$[]"](u))?i:f.items["$[]"](u.$to_s()),P(n["$respond_to?"]("roll"))&&(n=n.$roll(_)),m("RollResult").$new(f.name,u,n)},1),a(A,"$choice",function(_){return m("RollResult").$new(this.name,_,this.items["$[]"](_))},1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(r){var Q,c,L,A,I,t=[],d=r.nil,e=r.module,p=r.klass,E=r.hash2,B=r.send,a=r.to_ary,z=r.rb_plus,Y=r.rb_times,D=r.to_a,P=r.rb_minus,H=r.send2,F=r.find_super,N=r.def;return r.top.$require("bcdice/dice_table/d66_table"),Q=t,c=I=[e(t[0],"BCDice")].concat(Q),L=[e(I[0],"DiceTable")].concat(c),A=r.$r(L),N(p(L[0],A("D66Table"),"D66LeftRangeTable"),"$initialize",function y(_,f,l){var n;return delete y.$$p,n=E([],{}),B(l,"each",[],function(g){var S,C;return null==g&&(g=d),S=a(g),C=null==S[1]?d:S[1],B(null==S[0]?d:S[0],"each",[],function($){return null==$&&($=d),B(C,"each_with_index",[],function(x,O){var ie,ne;return null==x&&(x=d),null==O&&(O=d),ie=z(Y($,10),z(O,1)),B(n,"[]=",D(ne=[ie,x])),ne[P(ne.length,1)]},2)},1)},1),H(this,F(this,"initialize",y,!1,!0),"initialize",[_,f,n],null)},3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(r){var D,N,o,c,R,L,A,Q,H,M=[],t=r.nil,d=r.module,e=r.klass,p=r.def,E=r.truthy,B=r.rb_minus,a=r.rb_plus,z=r.rb_times;return D=M,N=H=[d(M[0],"BCDice")].concat(D),o=Q=[d(H[0],"DiceTable")].concat(N),R=[c=e(Q[0],null,"D66ParityTable")].concat(o),L=r.$r(R),(A=c.$$prototype).odd=A.even=A.name=t,p(c,"$initialize",function(m,b,y){var _=this;return _.name=m,_.odd=b.$freeze(),_.even=y.$freeze()},3),p(c,"$roll",function(m){var _,l,i,b=this,y=t;return y=m.$roll_once(6),_=m.$roll_once(6),l=(E(y["$odd?"]())?b.odd:b.even)["$[]"](B(_,1)),i=a(z(y,10),_),L("RollResult").$new(b.name,i,l)},1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(r){var Y,F,I,o,c,R,L,j,P,M=[],t=r.nil,d=r.module,e=r.klass,p=r.def,E=r.rb_plus,B=r.rb_times,a=r.send;return Y=M,F=P=[d(M[0],"BCDice")].concat(Y),I=j=[d(P[0],"DiceTable")].concat(F),c=[o=e(j[0],null,"D66RangeTable")].concat(I),R=r.$r(c),(L=o.$$prototype).items=L.name=t,p(o,"$initialize",function(h,m){return this.name=h,this.items=m.$freeze()},2),p(o,"$roll",function(h){var b,y,_,f=t;return b=h.$roll_once(6),y=h.$roll_once(6),_=E(B(b,10),y),f=a(this.items,"find",[],function(i){return null==i&&(i=t),i["$[]"](0)["$include?"](_)},1),R("RollResult").$new(this.name,_,f["$[]"](1))},1)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var N,I,A,h,m,b,y,c,Q,M=[],t=r.nil,d=r.module,e=r.klass,p=r.const_set,E=r.send,B=r.truthy,a=r.def,z=r.to_a,Y=r.rb_minus,D=r.eqeqeq,P=r.rb_times,H=r.rb_plus;return N=M,I=Q=[d(M[0],"BCDice")].concat(N),A=c=[d(Q[0],"DiceTable")].concat(I),m=[h=e(c[0],null,"RangeTable")].concat(A),b=r.$r(m),(y=h.$$prototype).name=y.items=y.num_of_dice=y.num_of_sides=y.formatter=t,p(m[0],"RollResult",E(b("Struct"),"new",["sum","values","content","formatted"],function _(){return(null==_.$$s?this:_.$$s).$alias_method("to_s","formatted")},{$$arity:0,$$s:h})),p(m[0],"Item",b("Struct").$new("range","content")),p(m[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),p(m[0],"DEFAULT_FORMATTER",E(h,"lambda",[],function(f,l){return null==f&&(f=t),null==l&&(l=t),f.$name()+"("+l.$sum()+") \uff1e "+l.$content()},2)),h.$attr_reader("name"),h.$attr_reader("num_of_dice"),h.$attr_reader("num_of_sides"),a(h,"$initialize",function _(f,l,i){var s,u=_.$$p||t,n=this,g=t;return delete _.$$p,n.name=f.$freeze(),n.formatter=B(s=u)?s:b("DEFAULT_FORMATTER"),g=b("DICE_ROLL_METHOD_RE").$match(l),B(g)||n.$raise(b("ArgumentError"),n.name+": invalid dice roll method: "+l),n.num_of_dice=g["$[]"](1).$to_i(),n.num_of_sides=g["$[]"](2).$to_i(),n.$store(i)},3),a(h,"$fetch",function(f){var i,l=this;return i=E(l.items,"find",[],function(n){return null==n&&(n=t),n.$range()["$include?"](f)},1),B(i)||l.$raise(b("RangeError"),l.name+": value is out of range: "+f),i},1),a(h,"$roll",function(f){var u,n,s,l=this,i=t;return u=(i=f.$roll_barabara(l.num_of_dice,l.num_of_sides)).$sum(),n=b("RollResult").$new(u,i,l.$fetch(u).$content()),s=[l.formatter["$[]"](l,n)],E(n,"formatted=",z(s)),Y(s.length,1),n},1),h.$private(),a(h,"$store",function(f){var i,u,l=this;return i=E(f,"map",[],function n(s,g){return null==s&&(s=t),null==g&&(g=t),[(null==n.$$s?this:n.$$s).$coerce_to_int_range(s),g]},{$$arity:2,$$s:l}),u=E(i,"sort_by",[],function(s,g){return null==s&&(s=t),null==g&&(g=t),s.$min()},2),l.$assert_min_sum_is_covered(u),l.$assert_max_sum_is_covered(u),l.$assert_no_gap_or_overlap_in_ranges(u),l.items=E(u,"map",[],function(s,g){return null==s&&(s=t),null==g&&(g=t),b("Item").$new(s,g.$freeze()).$freeze()},2).$freeze(),l},1),a(h,"$coerce_to_int_range",function(f){var i;return D(b("Integer"),i=f)?b("Range").$new(f,f):D(b("Range"),i)&&B(f.$begin()["$is_a?"](b("Integer")))&&B(f.$end()["$is_a?"](b("Integer")))?f:this.$raise(b("TypeError"),this.name+": "+f+" ("+f.$class()+") must be an Integer or a Range with Integers ")},1),a(h,"$assert_min_sum_is_covered",function(f){var i,l=this,u=t;return i=l.num_of_dice,u=f.$first()["$[]"](0),B(u["$include?"](i))||l.$raise(b("RangeError"),l.name+": min value ("+i+") is not covered: "+u),l},1),a(h,"$assert_max_sum_is_covered",function(f){var i,l=this,u=t;return i=P(l.num_of_dice,l.num_of_sides),u=f.$last()["$[]"](0),B(u["$include?"](i))||l.$raise(b("RangeError"),l.name+": max value ("+i+") is not covered: "+u),l},1),a(h,"$assert_no_gap_or_overlap_in_ranges",function(f){return E(f,"each_cons",[2],function i(u,n){var v,T,s=null==i.$$s?this:i.$$s,g=t,S=t;return null==s.name&&(s.name=t),null==u&&(u=t),null==n&&(n=t),g=u["$[]"](0),S=n["$[]"](0),v=g.$max(),T=H(v,1),B(S["$include?"](v))&&s.$raise(b("RangeError"),s.name+": Range overlap: "+g+" and "+S),B(S["$include?"](T))?t:s.$raise(b("RangeError"),s.name+": Range gap: "+g+" and "+S)},{$$arity:2,$$s:this}),this},1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(r){var Y,F,I,A,h,m,b,c,j,P,M=[],t=r.nil,d=r.$$$,e=r.module,p=r.klass,E=r.send,B=r.def,a=r.rb_minus;return Y=M,F=P=[e(M[0],"BCDice")].concat(Y),I=j=[e(P[0],"DiceTable")].concat(F),A=c=[p(j[0],null,"SaiFicSkillTable")].concat(I),m=[h=p(c[0],null,"Category")].concat(A),b=r.$r(m),h.$$prototype.name=t,B(h,"$initialize",function(f,l,i,u){var n=this;return n.name=f,n.skills=E(l.$map(),"with_index",[2],function(g,S){return null==g&&(g=t),null==S&&(S=t),d(b("SaiFicSkillTable"),"Skill").$new(f,g,i,S,u)},2),n.dice=i},4),B(h,"$roll",function(f){return this.$skills()["$[]"](a(f.$roll_sum(2,6),2))},1),B(h,"$to_s",function(){return this.name},0),h.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(r){var a,P,Q,R,L,I,F,Y,M=[],t=r.nil,d=r.module,e=r.klass,p=r.def,E=r.hash2;return a=M,P=Y=[d(M[0],"BCDice")].concat(a),Q=F=[d(Y[0],"DiceTable")].concat(P),I=[e(F[0],null,"SaiFicSkillTable")].concat(Q),(L=(R=e(I[0],null,"Skill")).$$prototype).s_format=L.category_dice=L.row_dice=L.category_name=L.name=t,p(R,"$initialize",function(h,m,b,y,_){var f=this;return f.category_name=h,f.name=m,f.category_dice=b,f.row_dice=y,f.s_format=_},5),p(R,"$to_s",function(){var h=this;return h.$format(h.s_format,E(["category_dice","row_dice","category_name","skill_name"],{category_dice:h.category_dice,row_dice:h.row_dice,category_name:h.category_name,skill_name:h.name}))},0),R.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(r){var U,R,b,y,_,f,l,A,o,M=r.top,t=[],d=r.nil,e=r.$$$,p=r.module,E=r.klass,B=r.hash2,a=r.send,Y=r.defs,D=r.const_set,P=r.to_ary,H=r.def,F=r.truthy,N=r.rb_minus,j=r.rb_plus;return M.$require("bcdice/dice_table/sai_fic_skill_table/category"),M.$require("bcdice/dice_table/sai_fic_skill_table/skill"),U=t,R=o=[p(t[0],"BCDice")].concat(U),b=A=[p(o[0],"DiceTable")].concat(R),_=[y=E(A[0],null,"SaiFicSkillTable")].concat(b),f=r.$r(_),(l=y.$$prototype).rtt=l.rtt_format=l.rct=l.rct_format=l.rttn=l.rttn_format=l.categories=d,Y(y,"$from_i18n",function(u,n,s){var g,S,v,$,G=d;if(null==s)s=B([],{});else if(!s.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(g=s.$$smap.rtt)&&(g=d),null==(S=s.$$smap.rct)&&(S=d),null==(v=s.$$smap.rttn)&&(v=d),$=(G=f("I18n").$t("RTT",B(["locale","raise","default"],{locale:n,raise:!1,default:B([],{})})).$merge(f("I18n").$t(u,B(["locale","raise"],{locale:n,raise:!0}))))["$[]"]("items"),G=a(G,"select",[],function(x,O){return null==x&&(x=d),null==O&&(O=d),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](x)},2),this.$new($,r.to_hash(G).$merge(B(["rtt","rct","rttn"],{rtt:g,rct:S,rttn:v})))},-3),D(_[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),D(_[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),D(_[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),D(_[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),H(y,"$initialize",function(u,n){var s,g,S,v,T,C,G,$=this;if(null==n)n=B([],{});else if(!n.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(s=n.$$smap.rtt)&&(s=d),null==(g=n.$$smap.rct)&&(g=d),null==(S=n.$$smap.rttn)&&(S=d),null==(v=n.$$smap.rtt_format)&&(v=f("DEFAULT_RTT")),null==(T=n.$$smap.rct_format)&&(T=f("DEFAULT_RCT")),null==(C=n.$$smap.rttn_format)&&(C=f("DEFAULT_RTTN")),null==(G=n.$$smap.s_format)&&(G=f("DEFAULT_S")),$.categories=a(u.$map(),"with_index",[1],function(x,O){var ie,ce,te;return null==x&&(x=d),null==O&&(O=d),ce=null==(ie=P(x))[0]?d:ie[0],te=null==ie[1]?d:ie[1],e(f("SaiFicSkillTable"),"Category").$new(ce,te,O,G)},{$$arity:2,$$has_top_level_mlhs_arg:!0}),$.rtt=s,$.rct=g,$.rttn=S.$to_a(),$.rtt_format=v,$.rct_format=T,$.rttn_format=C},-2),D(_[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),y.$attr_reader("categories"),H(y,"$roll_command",function(u,n){var g,s=this,S=d,v=d;return F(["RTT",s.rtt]["$include?"](g=n))?s.$format_skill(s.rtt_format,s.$roll_skill(u)):F(["RCT",s.rct]["$include?"](g))?(S=s.$roll_category(u),s.$format(s.rct_format,B(["category_dice","category_name"],{category_dice:S.$dice(),category_name:S.$name()}))):F(v=f("RTTN").$index(g))||F(v=s.rttn.$index(g))?s.$format_skill(s.rttn_format,s.categories["$[]"](v).$roll(u)):d},2),H(y,"$roll_category",function(u){return this.categories["$[]"](N(u.$roll_once(6),1))},1),H(y,"$roll_skill",function(u){return this.$roll_category(u).$roll(u)},1),H(y,"$prefixes",function(){var u=this;return j(["RTT[1-6]?","RCT",u.rtt,u.rct],u.rttn).$compact()},0),y.$private(),H(y,"$format_skill",function(u,n){return this.$format(u,B(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:n.$category_dice(),row_dice:n.$row_dice(),category_name:n.$category_name(),skill_name:n.$name(),text:n.$to_s()}))},2)},Opal.modules["bcdice/dice_table/table"]=function(r){var D,N,o,c,R,L,A,Q,H,M=[],t=r.nil,d=r.module,e=r.klass,p=r.hash2,E=r.defs,B=r.truthy,a=r.def,z=r.rb_minus;return D=M,N=H=[d(M[0],"BCDice")].concat(D),o=Q=[d(H[0],"DiceTable")].concat(N),R=[c=e(Q[0],null,"Table")].concat(o),L=r.$r(R),(A=c.$$prototype).times=A.sides=A.name=A.items=t,E(c,"$from_i18n",function(m,b){var _=t;return _=L("I18n").$t(m,p(["locale"],{locale:b})),this.$new(_["$[]"]("name"),_["$[]"]("type"),_["$[]"]("items"))},2),a(c,"$initialize",function(m,b,y){var _=this,f=t;return _.name=m,_.items=y.$freeze(),f=/(\d+)D(\d+)/i.$match(b),B(f)||_.$raise(L("ArgumentError"),"Unexpected table type: "+b),_.times=f["$[]"](1).$to_i(),_.sides=f["$[]"](2).$to_i()},3),a(c,"$roll",function(m){var y,b=this;return y=m.$roll_sum(b.times,b.sides),b.$choice(y)},1),a(c,"$choice",function(m){var y,b=this;return y=z(m,b.times),L("RollResult").$new(b.name,m,b.items["$[]"](y))},1)},Opal.modules["bcdice/dice_table"]=function(r){var M=r.top;return M.$require("bcdice/dice_table/roll_result"),M.$require("bcdice/dice_table/chain_table"),M.$require("bcdice/dice_table/d66_grid_table"),M.$require("bcdice/dice_table/d66_half_grid_table"),M.$require("bcdice/dice_table/d66_one_third_table"),M.$require("bcdice/dice_table/d66_left_range_table"),M.$require("bcdice/dice_table/d66_parity_table"),M.$require("bcdice/dice_table/d66_range_table"),M.$require("bcdice/dice_table/d66_table"),M.$require("bcdice/dice_table/range_table"),M.$require("bcdice/dice_table/sai_fic_skill_table"),M.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(r){var E,Y,P,a,M=[],d=r.module,e=r.const_set;return E=M,Y=a=[d(M[0],"BCDice")].concat(E),P=[d(a[0],"D66SortType")].concat(Y),e(P[0],"NO_SORT","no_sort"),e(P[0],"ASC","asc"),e(P[0],"DESC","desc"),function(z,Y){var P=[d(z,"RoundType")].concat(Y);return e(P[0],"CEIL","ceil"),e(P[0],"FLOOR","floor"),e(P[0],"ROUND","round")}(a[0],a)},Opal.modules["bcdice/translate"]=function(r){var a,P,H,F,N,Y,M=[],t=r.nil,d=r.module,e=r.hash2,E=r.def;return a=M,P=Y=[d(M[0],"BCDice")].concat(a),F=[H=d(Y[0],"Translate")].concat(P),N=r.$r(F),E(H,"$translate",function(Q,U){var I,o=this;if(null==o.locale&&(o.locale=t),null==U)U=e([],{});else if(!U.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return I=r.kwrestargs(U,{}),N("I18n").$translate(Q,e(["locale","raise"],{locale:o.locale,raise:!0}).$merge(r.to_hash(I)))},-2)},Opal.modules["bcdice/result"]=function(r){var Y,N,I,j,U,P,M=[],t=r.nil,e=r.klass,p=r.send,E=r.to_a,B=r.rb_minus,a=r.def;return Y=M,N=P=[(0,r.module)(M[0],"BCDice")].concat(Y),[j=e(P[0],null,"Result")].concat(N),(U=j.$$prototype).secret=U.success=U.failure=U.critical=U.fumble=t,a(I=r.get_singleton_class(j),"$success",function(R){return p(this.$new(),"tap",[],function(h){var m=t;return null==h&&(h=t),p(h,"text=",E(m=[R])),B(m.length,1),p(h,"success=",E(m=[!0])),m[B(m.length,1)]},1)},1),a(I,"$failure",function(R){return p(this.$new(),"tap",[],function(h){var m=t;return null==h&&(h=t),p(h,"text=",E(m=[R])),B(m.length,1),p(h,"failure=",E(m=[!0])),m[B(m.length,1)]},1)},1),a(I,"$critical",function(R){return p(this.$new(),"tap",[],function(h){var m=t;return null==h&&(h=t),p(h,"text=",E(m=[R])),B(m.length,1),p(h,"critical=",E(m=[!0])),B(m.length,1),p(h,"success=",E(m=[!0])),m[B(m.length,1)]},1)},1),a(I,"$fumble",function(R){return p(this.$new(),"tap",[],function(h){var m=t;return null==h&&(h=t),p(h,"text=",E(m=[R])),B(m.length,1),p(h,"fumble=",E(m=[!0])),B(m.length,1),p(h,"failure=",E(m=[!0])),m[B(m.length,1)]},1)},1),a(I,"$nothing",function(){return"nothing"},0),a(j,"$initialize",function(o){var c=this;return null==o&&(o=t),c.text=o,c.rands=t,c.detailed_rands=t,c.secret=!1,c.success=!1,c.failure=!1,c.critical=!1,c.fumble=!1},-1),j.$attr_accessor("text","rands","detailed_rands"),j.$attr_writer("secret","success","failure","critical","fumble"),a(j,"$secret?",function(){return this.secret},0),a(j,"$success?",function(){return this.success},0),a(j,"$failure?",function(){return this.failure},0),a(j,"$critical?",function(){return this.critical},0),a(j,"$fumble?",function(){return this.fumble},0),a(j,"$condition=",function(o){return this.success=o,this.failure=o["$!"]()},1)},Opal.modules["racc/parser"]=function(r){var b,_,f,t=[],d=r.$r(t),e=r.nil,p=r.$$$,E=r.module,B=r.klass,a=r.truthy,z=r.const_set,Y=r.defs,D=r.gvars,P=r.rb_lt,H=r.send,F=r.to_a,N=r.rb_minus,j=r.def,Q=r.to_ary,U=r.neqeq,I=r.rb_plus,o=r.eqeq,c=r.rb_ge,R=r.rb_gt,L=r.eqeqeq,A=r.rb_le,h=r.rb_times;return b=t,_=[E(t[0],"Racc")].concat(b),f=r.$r(_),B(_[0],f("StandardError"),"ParseError"),a(p("::","ParseError","skip_raise")?"constant":e)||z(t[0],"ParseError",p(d("Racc"),"ParseError")),function(m,b){var n,s,g,S,v,f=[E(m,"Racc")].concat(b),l=r.$r(f);return a(l("Racc_No_Extensions","skip_raise")?"constant":e)||z(f[0],"Racc_No_Extensions",!1),n=f,g=[s=B(f[0],null,"Parser")].concat(n),S=r.$r(g),(v=s.$$prototype).yydebug=v.racc_debug_out=v.racc_error_status=v.racc_t=v.racc_vstack=v.racc_val=v.racc_state=v.racc_tstack=e,z(g[0],"Racc_Runtime_Version","1.4.6"),z(g[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),z(g[0],"Racc_Runtime_Core_Version_R","1.4.6"),z(g[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),z(g[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),z(g[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),z(g[0],"Racc_Runtime_Core_Version",S("Racc_Runtime_Core_Version_R")),z(g[0],"Racc_Runtime_Core_Revision",S("Racc_Runtime_Core_Revision_R")),z(g[0],"Racc_Runtime_Type","ruby"),Y(S("Parser"),"$racc_runtime_type",function(){return S("Racc_Runtime_Type")},0),j(s,"$_racc_setup",function(){var C,G,$=this,Z=e,x=e,O=e;return null==D.stderr&&(D.stderr=e),a(p($.$class(),"Racc_debug_parser"))||($.yydebug=!1),a(null!=(C=$.yydebug)&&C!==e?"instance-variable":e)||($.yydebug=!1),a($.yydebug)&&(a(null!=(G=$.racc_debug_out)&&G!==e?"instance-variable":e)||($.racc_debug_out=D.stderr),$.racc_debug_out=a(Z=$.racc_debug_out)?Z:D.stderr),x=p($.$class(),"Racc_arg"),a(P(x.$size(),14))&&(H(x,"[]=",F(O=[13,!0])),N(O.length,1)),x},0),j(s,"$_racc_init_sysvars",function(){var C=this;return C.racc_state=[0],C.racc_tstack=[],C.racc_vstack=[],C.racc_t=e,C.racc_val=e,C.racc_read_next=!0,C.racc_user_yyerror=!1,C.racc_error_status=0},0),j(s,"$do_parse",function(){return this.$__send__(S("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},0),j(s,"$next_token",function(){return this.$raise(S("NotImplementedError"),this.$class()+"#next_token is not defined")},0),j(s,"$_racc_do_parse_rb",function(C,G){var $,x=this,O=e,ie=e,ne=e,ce=e,K=e,q=e,V=e,k=e;return $=Q(C),O=null==$[0]?e:$[0],ie=null==$[1]?e:$[1],ne=null==$[2]?e:$[2],ce=null==$[3]?e:$[3],K=null==$[10]?e:$[10],x.$_racc_init_sysvars(),q=V=k=e,H(x,"catch",["racc_end_parse"],function w(){var re,X,W=null==w.$$s?this:w.$$s,ae=e;for(null==W.racc_state&&(W.racc_state=e),null==W.racc_read_next&&(W.racc_read_next=e),null==W.racc_t&&(W.racc_t=e),null==W.yydebug&&(W.yydebug=e),null==W.racc_val&&(W.racc_val=e);a(!0);)for(a(k=ce["$[]"](W.racc_state["$[]"](-1)))?(a(W.racc_read_next)&&U(W.racc_t,0)&&(X=W.$next_token(),re=Q(X),q=null==re[0]?e:re[0],W.racc_val=null==re[1]?e:re[1],W.racc_t=a(q)?a(ae=K["$[]"](q))?ae:1:0,a(W.yydebug)&&W.$racc_read_token(W.racc_t,q,W.racc_val),W.racc_read_next=!1),k=I(k,W.racc_t),a(c(k,0))&&a(V=O["$[]"](k))&&o(ie["$[]"](k),W.racc_state["$[]"](-1))||(V=ne["$[]"](W.racc_state["$[]"](-1)))):V=ne["$[]"](W.racc_state["$[]"](-1));a(V=W.$_racc_evalact(V,C)););},{$$arity:0,$$s:x})},2),j(s,"$yyparse",function(C,G){return this.$__send__(S("Racc_YY_Parse_Method"),C,G,this.$_racc_setup(),!0)},2),j(s,"$_racc_yyparse_rb",function(C,G,$,Z){var x,ne=e,ce=e,te=e,K=e,V=e,k=e,w=e;return x=Q($),ne=null==x[0]?e:x[0],ce=null==x[1]?e:x[1],te=null==x[2]?e:x[2],K=null==x[3]?e:x[3],V=null==x[10]?e:x[10],this.$_racc_init_sysvars(),k=e,w=e,H(this,"catch",["racc_end_parse"],function ee(){var W=null==ee.$$s?this:ee.$$s;for(null==W.racc_state&&(W.racc_state=e);!a(w=K["$[]"](W.racc_state["$[]"](-1)));)for(;a(k=W.$_racc_evalact(te["$[]"](W.racc_state["$[]"](-1)),$)););return H(C,"__send__",[G],function ae(se,_e){var $e=null==ae.$$s?this:ae.$$s,J=e,oe=e;for(null==$e.racc_t&&($e.racc_t=e),null==$e.racc_state&&($e.racc_state=e),null==$e.racc_read_next&&($e.racc_read_next=e),null==se&&(se=e),null==_e&&(_e=e),$e.racc_t=a(se)?a(J=V["$[]"](se))?J:1:0,$e.racc_val=_e,$e.racc_read_next=!1,w=I(w,$e.racc_t),a(c(w,0))&&a(k=ne["$[]"](w))&&o(ce["$[]"](w),$e.racc_state["$[]"](-1))||(k=te["$[]"]($e.racc_state["$[]"](-1)));a(k=$e.$_racc_evalact(k,$)););for(;a(a(J=a(oe=(w=K["$[]"]($e.racc_state["$[]"](-1)))["$!"]())?oe:$e.racc_read_next["$!"]())?J:$e.racc_t["$=="](0));)for(a(w)&&a(w=I(w,$e.racc_t))&&a(c(w,0))&&a(k=ne["$[]"](w))&&o(ce["$[]"](w),$e.racc_state["$[]"](-1))||(k=te["$[]"]($e.racc_state["$[]"](-1)));a(k=$e.$_racc_evalact(k,$)););},{$$arity:2,$$s:W})},{$$arity:0,$$s:this})},4),j(s,"$_racc_evalact",function(C,G){var $,te,x=this,O=e,ie=e,ce=e,K=e,q=e,V=e,k=e;if(O=null==($=Q(G))[0]?e:$[0],ie=null==$[1]?e:$[1],ce=null==$[3]?e:$[3],te=null==$[11]?e:$[11],K=null==$[12]?e:$[12],a(R(C,0))&&a(P(C,te)))a(R(x.racc_error_status,0))&&(o(x.racc_t,1)||(x.racc_error_status=N(x.racc_error_status,1))),x.racc_vstack.$push(x.racc_val),x.racc_state.$push(C),x.racc_read_next=!0,a(x.yydebug)&&(x.racc_tstack.$push(x.racc_t),x.$racc_shift(x.racc_t,x.racc_tstack,x.racc_vstack));else if(a(P(C,0))&&a(R(C,K["$-@"]()))){if(q=H(x,"catch",["racc_jump"],function w(){var ee=null==w.$$s?this:w.$$s;return null==ee.racc_state&&(ee.racc_state=e),ee.racc_state.$push(ee.$_racc_do_reduce(G,C)),!1},{$$arity:0,$$s:x}),a(q)){if(L(1,V=q))return x.racc_user_yyerror=!0,K["$-@"]();if(L(2,V))return te;x.$raise("[Racc Bug] unknown jump code")}}else if(o(C,te))a(x.yydebug)&&x.$racc_accept(),x.$throw("racc_end_parse",x.racc_vstack["$[]"](0));else{if(o(C,K["$-@"]())){for(L(0,V=x.racc_error_status)?a(G["$[]"](21))||x.$on_error(x.racc_t,x.racc_val,x.racc_vstack):L(3,V)&&(o(x.racc_t,0)&&x.$throw("racc_end_parse",e),x.racc_read_next=!0),x.racc_user_yyerror=!1,x.racc_error_status=3;a(!0)&&!(a(k=ce["$[]"](x.racc_state["$[]"](-1)))&&(k=I(k,1),a(c(k,0))&&a(C=O["$[]"](k))&&o(ie["$[]"](k),x.racc_state["$[]"](-1))));)a(A(x.racc_state.$size(),1))&&x.$throw("racc_end_parse",e),x.racc_state.$pop(),x.racc_vstack.$pop(),a(x.yydebug)&&(x.racc_tstack.$pop(),x.$racc_e_pop(x.racc_state,x.racc_tstack,x.racc_vstack));return C}x.$raise("[Racc Bug] unknown action "+C.$inspect())}return a(x.yydebug)&&x.$racc_next_state(x.racc_state["$[]"](-1),x.racc_state),e},2),j(s,"$_racc_do_reduce",function(C,G){var $,K,V,W,ae,se,$e,x=this,ie=e,ne=e,ce=e,te=e,q=e,k=e,w=e,ee=e,re=e,X=e,_e=e,le=e,ue=e,J=e;return ie=null==($=Q(C))[4]?e:$[4],ne=null==$[5]?e:$[5],ce=null==$[6]?e:$[6],te=null==$[7]?e:$[7],K=null==$[8]?e:$[8],q=null==$[9]?e:$[9],V=null==$[13]?e:$[13],k=x.racc_state,w=x.racc_vstack,ee=x.racc_tstack,re=h(G,-3),X=q["$[]"](re),W=q["$[]"](I(re,1)),ae=q["$[]"](I(re,2)),se=[],a(x.yydebug)&&(_e=ee["$[]"](X["$-@"](),X)),le=w["$[]"](X["$-@"](),X),a(x.yydebug)&&(ue=[X["$-@"](),X,se],H(ee,"[]=",F(ue)),N(ue.length,1)),ue=[X["$-@"](),X,se],H(w,"[]=",F(ue)),N(ue.length,1),ue=[X["$-@"](),X,se],H(k,"[]=",F(ue)),N(ue.length,1),a(V)?w.$push(x.$__send__(ae,le,w,le["$[]"](0))):w.$push(x.$__send__(ae,le,w)),ee.$push(W),a(x.yydebug)&&x.$racc_reduce(_e,W,ee,w),$e=N(W,K),a(re=te["$[]"]($e))&&(re=I(re,k["$[]"](-1)),a(c(re,0))&&a(J=ie["$[]"](re))&&o(ne["$[]"](re),$e))?J:ce["$[]"]($e)},2),j(s,"$on_error",function(C,G,$){var x,Z=this;return Z.$raise(S("ParseError"),Z.$sprintf("\nparse error on value %s (%s)",G.$inspect(),a(x=Z.$token_to_str(C))?x:"?"))},3),j(s,"$yyerror",function(){return this.$throw("racc_jump",1)},0),j(s,"$yyaccept",function(){return this.$throw("racc_jump",2)},0),j(s,"$yyerrok",function(){return this.racc_error_status=0},0),j(s,"$racc_read_token",function(C,G,$){var Z=this;return Z.racc_debug_out.$print("read    "),Z.racc_debug_out.$print(G.$inspect(),"(",Z.$racc_token2str(C),") "),Z.racc_debug_out.$puts($.$inspect()),Z.racc_debug_out.$puts()},3),j(s,"$racc_shift",function(C,G,$){var Z=this;return Z.racc_debug_out.$puts("shift   "+Z.$racc_token2str(C)),Z.$racc_print_stacks(G,$),Z.racc_debug_out.$puts()},3),j(s,"$racc_reduce",function(C,G,$,Z){var x=this,O=e;return(O=x.racc_debug_out).$print("reduce "),a(C["$empty?"]())?O.$print(" <none>"):H(C,"each",[],function ie(ne){return null==ne&&(ne=e),O.$print(" ",(null==ie.$$s?this:ie.$$s).$racc_token2str(ne))},{$$arity:1,$$s:x}),O.$puts(" --\x3e "+x.$racc_token2str(G)),x.$racc_print_stacks($,Z),x.racc_debug_out.$puts()},4),j(s,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},0),j(s,"$racc_e_pop",function(C,G,$){var Z=this;return Z.racc_debug_out.$puts("error recovering mode: pop token"),Z.$racc_print_states(C),Z.$racc_print_stacks(G,$),Z.racc_debug_out.$puts()},3),j(s,"$racc_next_state",function(C,G){var $=this;return $.racc_debug_out.$puts("goto    "+C),$.$racc_print_states(G),$.racc_debug_out.$puts()},2),j(s,"$racc_print_stacks",function(C,G){var Z=e;return(Z=this.racc_debug_out).$print("        ["),H(C,"each_index",[],function x(O){return null==O&&(O=e),Z.$print(" (",(null==x.$$s?this:x.$$s).$racc_token2str(C["$[]"](O))," ",G["$[]"](O).$inspect(),")")},{$$arity:1,$$s:this}),Z.$puts(" ]")},2),j(s,"$racc_print_states",function(C){var $=e;return($=this.racc_debug_out).$print("        ["),H(C,"each",[],function(x){return null==x&&(x=e),$.$print(" ",x)},1),$.$puts(" ]")},1),j(s,"$racc_token2str",function(C){var $;return a($=p(this.$class(),"Racc_token_to_s_table")["$[]"](C))?$:this.$raise("[Racc Bug] can't convert token "+C+" to string")},1),j(s,"$token_to_str",function(C){return p(this.$class(),"Racc_token_to_s_table")["$[]"](C)},1)}(t[0],t)},Opal.modules["bcdice/arithmetic/node"]=function(r){var N,I,L,_,f,h,m,c,Q,M=[],t=r.nil,d=r.$$$,e=r.module,p=r.klass,E=r.def,B=r.send2,a=r.find_super,z=r.eqeq,Y=r.const_set,D=r.eqeqeq,P=r.rb_divide,H=r.alias;return N=M,I=Q=[e(M[0],"BCDice")].concat(N),L=c=[e(Q[0],"Arithmetic")].concat(I),h=[e(c[0],"Node")].concat(L),m=r.$r(h),(f=(_=p(h[0],null,"BinaryOp")).$$prototype).lhs=f.rhs=f.op=t,E(_,"$initialize",function(i,u,n){var s=this;return s.lhs=i,s.op=u,s.rhs=n},3),E(_,"$eval",function(i){var s,u=this,n=t;return n=u.lhs.$eval(i),s=u.rhs.$eval(i),n.$send(u.op,s)},1),E(_,"$output",function(){var i=this;return""+i.lhs.$output()+i.op+i.rhs.$output()},0),E(_,"$s_exp",function(){var i=this;return"("+i.$op_for_s_exp()+" "+i.lhs.$s_exp()+" "+i.rhs.$s_exp()+")"},0),E(_,"$op_for_s_exp",function(){return this.op},0),function(b,y,_){var f=p(b,y,"DivideBase"),l=[f].concat(_),i=r.$r(l),u=f.$$prototype;u.lhs=u.rhs=u.op=t,E(f,"$initialize",function n(s,g){return delete n.$$p,B(this,a(this,"initialize",n,!1,!0),"initialize",[s,"/",g],null)},2),E(f,"$eval",function(s){var S,v,g=this;return S=g.lhs.$eval(s),v=g.rhs.$eval(s),z(v,0)&&g.$raise(i("ZeroDivisionError")),g.$divide_and_round(S,v,s)},1),E(f,"$output",function n(){var s=n.$$p||t,g=this;return delete n.$$p,""+B(g,a(g,"output",n,!1,!0),"output",[],s)+g.$rounding_method()},0),f.$private(),E(f,"$rounding_method",function(){return d(this.$class(),"ROUNDING_METHOD")},0),E(f,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()},0),E(f,"$divide_and_round",function(s,g,S){return this.$raise(i("NotImplementedError"))},3)}(h[0],m("BinaryOp"),h),function(b,y,_){var f=p(b,y,"DivideWithGameSystemDefault"),l=[f].concat(_),i=r.$r(l);Y(l[0],"ROUNDING_METHOD",""),f.$private(),E(f,"$divide_and_round",function(n,s,g){var S;return D(d(i("RoundType"),"CEIL"),S=g)?P(n.$to_f(),s).$ceil():D(d(i("RoundType"),"ROUND"),S)?P(n.$to_f(),s).$round():P(n,s).$floor()},3)}(h[0],m("DivideBase"),h),function(b,y,_){var f=p(b,y,"DivideWithCeil"),l=[f].concat(_);Y(l[0],"ROUNDING_METHOD","C"),f.$private(),E(f,"$divide_and_round",function(u,n,s){return P(u.$to_f(),n).$ceil()},3)}(h[0],m("DivideBase"),h),function(b,y,_){var f=p(b,y,"DivideWithRound"),l=[f].concat(_);Y(l[0],"ROUNDING_METHOD","R"),f.$private(),E(f,"$divide_and_round",function(u,n,s){return P(u.$to_f(),n).$round()},3)}(h[0],m("DivideBase"),h),function(b,y,_){var f=p(b,y,"DivideWithFloor"),l=[f].concat(_);Y(l[0],"ROUNDING_METHOD","F"),f.$private(),E(f,"$divide_and_round",function(u,n,s){return P(u,n).$to_i()},3)}(h[0],m("DivideBase"),h),function(b,y){var _=p(b,null,"Negative");_.$$prototype.body=t,E(_,"$initialize",function(i){return this.body=i},1),E(_,"$eval",function(i){return this.body.$eval(i)["$-@"]()},1),E(_,"$output",function(){return"-"+this.body.$output()},0),E(_,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"},0)}(h[0]),function(b,y){var _=p(b,null,"Parenthesis");_.$$prototype.expr=t,E(_,"$initialize",function(i){return this.expr=i},1),E(_,"$eval",function(i){return this.expr.$eval(i)},1),E(_,"$output",function(){return"("+this.expr.$output()+")"},0),E(_,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"},0)}(h[0]),function(b,y){var _=p(b,null,"Number");return _.$$prototype.value=t,E(_,"$initialize",function(i){return this.value=i},1),E(_,"$eval",function(i){return this.value},1),E(_,"$output",function(){return this.value.$to_s()},0),H(_,"s_exp","output")}(h[0])},Opal.modules.strscan=function(r){var F,N,j,Q,U,M=[],t=r.nil,e=r.def,p=r.truthy,E=r.eqeqeq,B=r.Opal,a=r.send,z=r.to_a,Y=r.rb_minus,D=r.alias;return F=M,j=[N=(0,r.klass)(M[0],null,"StringScanner")].concat(F),Q=r.$r(j),(U=N.$$prototype).pos=U.string=U.working=U.matched=U.prev_pos=U.match=t,N.$attr_reader("pos","matched"),e(N,"$initialize",function(o){var c=this;return c.string=o,c.pos=0,c.matched=t,c.working=o,c.match=[]},1),N.$attr_reader("string"),e(N,"$beginning_of_line?",function(){var o=this;return 0===o.pos||"\n"===o.string.charAt(o.pos-1)},0),e(N,"$scan",function(o){var c=this,R=(o=c.$anchor(o)).exec(c.working);return null==R?c.matched=t:"object"==typeof R?(c.prev_pos=c.pos,c.pos+=R[0].length,c.working=c.working.substring(R[0].length),c.matched=R[0],c.match=R,R[0]):"string"==typeof R?(c.pos+=R.length,c.working=c.working.substring(R.length),R):t},1),e(N,"$scan_until",function(o){var c=this;o=c.$anchor(o);for(var A,R=c.pos,L=c.working;;){if(A=o.exec(L),R+=1,L=L.substr(1),null!=A)return c.matched=c.string.substr(c.pos,R-c.pos-1+A[0].length),c.match=A,c.prev_pos=R-1,c.pos=R,c.working=L.substr(A[0].length),c.matched;if(0===L.length)return c.match=[],c.matched=t}},1),e(N,"$[]",function(o){var R;if(p(this.match["$empty?"]()))return t;E(Q("Symbol"),R=o)?o=o.$to_s():E(Q("String"),R)||(o=B["$coerce_to!"](o,Q("Integer"),"to_int"));var L=this.match;return o<0&&(o+=L.length),o<0||o>=L.length||null==L[o]?t:L[o]},1),e(N,"$check",function(o){var c=this,R=(o=c.$anchor(o)).exec(c.working);return c.matched=null==R?t:R[0]},1),e(N,"$check_until",function(o){var c=this,R=c.prev_pos,L=c.pos,A=c.$scan_until(o);return A!==t&&(c.matched=A.substr(-1),c.working=c.string.substr(L)),c.prev_pos=R,c.pos=L,A},1),e(N,"$peek",function(o){return this.working.substring(0,o)},1),e(N,"$eos?",function(){return 0===this.working.length},0),e(N,"$exist?",function(o){var R=o.exec(this.working);return null==R?t:0==R.index?0:R.index+1},1),e(N,"$skip",function(o){var c=this,R=(o=c.$anchor(o)).exec(c.working);if(null==R)return c.match=[],c.matched=t;var L=R[0],A=L.length;return c.matched=L,c.match=R,c.prev_pos=c.pos,c.pos+=A,c.working=c.working.substring(A),A},1),e(N,"$skip_until",function(o){var R=this.$scan_until(o);return R===t?t:(this.matched=R.substr(-1),R.length)},1),e(N,"$get_byte",function(){var o=this,c=t;return o.pos<o.string.length?(o.prev_pos=o.pos,o.pos+=1,c=o.matched=o.working.substring(0,1),o.working=o.working.substring(1)):o.matched=t,c},0),e(N,"$match?",function(o){var c=this,R=(o=c.$anchor(o)).exec(c.working);return null==R?t:(c.prev_pos=c.pos,R[0].length)},1),e(N,"$pos=",function(o){var c=this;return o<0&&(o+=c.string.$length()),c.pos=o,c.working=c.string.slice(o)},1),e(N,"$matched_size",function(){return this.matched===t?t:this.matched.length},0),e(N,"$post_match",function(){var o=this;return o.matched===t?t:o.string.substr(o.pos)},0),e(N,"$pre_match",function(){var o=this;return o.matched===t?t:o.string.substr(0,o.prev_pos)},0),e(N,"$reset",function(){var o=this;return o.working=o.string,o.matched=t,o.pos=0},0),e(N,"$rest",function(){return this.working},0),e(N,"$rest?",function(){return 0!==this.working.length},0),e(N,"$rest_size",function(){return this.$rest().$size()},0),e(N,"$terminate",function(){var c,o=this;return o.match=t,c=[o.string.$length()],a(o,"pos=",z(c)),c[Y(c.length,1)]},0),e(N,"$unscan",function(){var o=this;return o.pos=o.prev_pos,o.prev_pos=t,o.match=t,o},0),D(N,"bol?","beginning_of_line?"),D(N,"getch","get_byte"),N.$private(),e(N,"$anchor",function(o){var c=o.toString().match(/\/([^\/]+)$/);return c=c?c[1]:void 0,new RegExp("^(?:"+o.source+")",c)},1)},Opal.modules["bcdice/normalize"]=function(r){var a,P,Y,M=[],t=r.nil,d=r.module,e=r.eqeqeq,p=r.def,E=r.eqeq;return a=M,Y=[d(M[0],"BCDice")].concat(a),(P=d(Y[0],"Normalize")).$module_function(),p(P,"$comparison_operator",function(F){var N;return e(/<=|=</,N=F)?"<=":e(/>=|=>/,N)?">=":e(/<>|!=|=!/,N)?"!=":e(/</,N)?"<":e(/>/,N)?">":e(/=/,N)?"==":t},1),p(P,"$target_number",function(F){return E(F,"?")?F:F.$to_i()},1)},Opal.modules["bcdice/command/lexer"]=function(r){var P,j,c,R,L,A,h,U,F,M=r.top,t=[],d=r.nil,e=r.module,p=r.klass,E=r.const_set,B=r.hash2,a=r.truthy,z=r.send,Y=r.def;return M.$require("strscan"),M.$require("bcdice/normalize"),P=t,j=F=[e(t[0],"BCDice")].concat(P),c=U=[e(F[0],"Command")].concat(j),L=[R=p(U[0],null,"Lexer")].concat(c),A=r.$r(L),(h=R.$$prototype).scanner=h.notations=d,E(L[0],"SYMBOLS",B(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),Y(R,"$initialize",function(b,y){var _,f,i;return b=a(i=(f=(_=b)===d||null==_?d:z(_,"split",[" ",2]))===d||null==f?d:z(f,"first",[]))?i:"",this.scanner=A("StringScanner").$new(b),this.notations=z(y,"map",[],function(n){return null==n&&(n=d),a(n["$is_a?"](A("String")))?A("Regexp").$new(n):n},1)},2),Y(R,"$next_token",function(){try{var b=this,y=d,_=d,l=d,i=d;return a(b.scanner["$eos?"]())?[!1,"$"]:(z(b.notations,"each",[],function u(n){var g,s=null==u.$$s?this:u.$$s;if(null==s.scanner&&(s.scanner=d),null==n&&(n=d),g=s.scanner.$scan(n),!a(g))return d;r.ret(["NOTATION",g])},{$$arity:1,$$s:b}),a(y=b.scanner.$scan(/\d+/))?["NUMBER",y.$to_i()]:a(_=b.scanner.$scan(/[<>!=]+/))?(_=A("Normalize").$comparison_operator(_),[a(_)?"CMP_OP":"ILLEGAL",_]):(l=b.scanner.$getch().$upcase(),[a(i=A("SYMBOLS")["$[]"](l))?i:l.$to_sym(),l]))}catch(u){if(u===r.returner)return u.$v;throw u}},0),Y(R,"$source",function(){return this.scanner.$string()},0)},Opal.modules["bcdice/command/parsed"]=function(r){var z,H,U,I,o,c,R,N,D,M=[],t=r.nil,d=r.module,e=r.klass,p=r.def,E=r.truthy,B=r.eqeqeq;return z=M,H=D=[d(M[0],"BCDice")].concat(z),U=N=[d(D[0],"Command")].concat(H),o=[I=e(N[0],null,"Parsed")].concat(U),c=r.$r(o),(R=I.$$prototype).question_target=R.critical=R.fumble=R.dollar=R.modify_number=R.target_number=R.prefix_number=R.command=R.suffix_number=R.cmp_op=t,I.$attr_accessor("command"),I.$attr_accessor("prefix_number"),I.$attr_accessor("suffix_number"),I.$attr_accessor("critical"),I.$attr_accessor("fumble"),I.$attr_accessor("dollar"),I.$attr_accessor("modify_number"),I.$attr_accessor("cmp_op"),I.$attr_accessor("target_number"),I.$attr_writer("question_target"),p(I,"$initialize",function(){var A=this;return A.prefix_number=t,A.suffix_number=t,A.critical=t,A.fumble=t,A.dollar=t,A.cmp_op=t,A.target_number=t,A.question_target=!1},0),p(I,"$question_target?",function(){return this.question_target},0),p(I,"$to_s",function(A){var l,h=this,m=t,b=t,y=t,_=t,f=t;return null==A&&(A="after_command"),m=E(h.critical)?"@"+h.critical:t,b=E(h.fumble)?"#"+h.fumble:t,y=E(h.dollar)?"$"+h.dollar:t,_=c("Format").$modifier(h.modify_number),f=E(h.question_target)?"?":h.target_number,B("after_command",l=A)?[h.prefix_number,h.command,h.suffix_number,m,b,y,_,h.cmp_op,f].$join():B("after_modify_number",l)?[h.prefix_number,h.command,h.suffix_number,_,m,b,y,h.cmp_op,f].$join():B("after_target_number",l)?[h.prefix_number,h.command,h.suffix_number,_,h.cmp_op,f,m,b,y].$join():t},-1)},Opal.modules["bcdice/command/parser"]=function(r){var c,h,l,s,g,S,v,T,C,G,$,Z,ie,i,u,n,te,b,y,L,M=r.top,t=[],d=r.$r(t),e=r.nil,p=r.$$$,E=r.klass,B=r.module,a=r.hash2,z=r.send2,Y=r.find_super,D=r.def,P=r.send,H=r.to_a,F=r.rb_minus,N=r.eqeq,j=r.hash,Q=r.const_set,U=r.truthy,I=r.to_ary;return M.$require("racc/parser.rb"),M.$require("bcdice/arithmetic/node"),M.$require("bcdice/command/lexer"),M.$require("bcdice/command/parsed"),E(p(d("BCDice"),"Command"),p(d("Racc"),"Parser"),"Parser"),c=t,h=L=[B(t[0],"BCDice")].concat(c),b=[B(L[0],"Command")].concat(h),y=r.$r(b),l=b,u=[i=E(b[0],p(y("Racc"),"Parser"),"Parser")].concat(l),n=r.$r(u),(te=i.$$prototype).notations=te.lexer=te.modifier=te.suffix_number=te.prefix_number=te.need_suffix_number=te.need_prefix_number=te.critical=te.fumble=te.dollar=te.allowed_cmp_op=te.question_target=e,D(i,"$initialize",function K(q,V){var k,w,ee,re,W=this;if(delete K.$$p,k=r.slice.call(arguments),null==(w=r.extract_kwargs(k)))w=a([],{});else if(!w.$$is_hash)throw r.ArgumentError.$new("expected kwargs");if(ee=k,!r.hasOwnProperty.call(w.$$smap,"round_type"))throw r.ArgumentError.$new("missing keyword: round_type");return re=w.$$smap.round_type,z(W,Y(W,"initialize",K,!1,!0),"initialize",[],null),W.notations=ee,W.round_type=re,W.prefix_number=!1,W.suffix_number=!1,W.need_prefix_number=!1,W.need_suffix_number=!1,W.modifier=!0,W.critical=!1,W.fumble=!1,W.dollar=!1,W.allowed_cmp_op=[e,">=",">","<=","<","==","!="],W.question_target=!1},-2),D(i,"$disable_modifier",function(){return this.modifier=!1,this},0),D(i,"$enable_prefix_number",function(){return this.prefix_number=!0,this},0),D(i,"$enable_suffix_number",function(){return this.suffix_number=!0,this},0),D(i,"$has_prefix_number",function(){var q=this;return q.prefix_number=!0,q.need_prefix_number=!0,q},0),D(i,"$has_suffix_number",function(){var q=this;return q.suffix_number=!0,q.need_suffix_number=!0,q},0),D(i,"$enable_critical",function(){return this.critical=!0,this},0),D(i,"$enable_fumble",function(){return this.fumble=!0,this},0),D(i,"$enable_dollar",function(){return this.dollar=!0,this},0),D(i,"$restrict_cmp_op_to",function(q){var V,w=this;return V=r.slice.call(arguments),w.allowed_cmp_op=V,w},-1),D(i,"$enable_question_target",function(){return this.question_target=!0,this},0),D(i,"$parse",function(q){var V=this;try{return V.lexer=n("Lexer").$new(q,V.notations),V.$do_parse()}catch(k){if(!r.rescue(k,[n("ParseError"),n("ZeroDivisionError")]))throw k;try{return e}finally{r.pop_exception()}}},1),i.$private(),D(i,"$parsed",function(q,V,k,w){return P(n("Parsed").$new(),"tap",[],function re(X){var W,ae,se,_e,le,ue,$e=null==re.$$s?this:re.$$s,J=e;return null==$e.round_type&&($e.round_type=e),null==X&&(X=e),J=[q["$[]"]("command")],P(X,"command=",H(J)),F(J.length,1),J=[(W=q["$[]"]("prefix"),W===e||null==W?e:P(W,"eval",[$e.round_type]))],P(X,"prefix_number=",H(J)),F(J.length,1),J=[(ae=q["$[]"]("suffix"),ae===e||null==ae?e:P(ae,"eval",[$e.round_type]))],P(X,"suffix_number=",H(J)),F(J.length,1),J=[(se=V["$[]"]("critical"),se===e||null==se?e:P(se,"eval",[$e.round_type]))],P(X,"critical=",H(J)),F(J.length,1),J=[(_e=V["$[]"]("fumble"),_e===e||null==_e?e:P(_e,"eval",[$e.round_type]))],P(X,"fumble=",H(J)),F(J.length,1),J=[(le=V["$[]"]("dollar"),le===e||null==le?e:P(le,"eval",[$e.round_type]))],P(X,"dollar=",H(J)),F(J.length,1),J=[k.$eval($e.round_type)],P(X,"modify_number=",H(J)),F(J.length,1),J=[w["$[]"]("cmp_op")],P(X,"cmp_op=",H(J)),F(J.length,1),N(w["$[]"]("target"),"?")?(P(X,"question_target=",H(J=[!0])),F(J.length,1),P(X,"target_number=",H(J=[0])),J[F(J.length,1)]):(P(X,"question_target=",H(J=[!1])),F(J.length,1),J=[(ue=w["$[]"]("target"),ue===e||null==ue?e:P(ue,"eval",[$e.round_type]))],P(X,"target_number=",H(J)),J[F(J.length,1)])},{$$arity:1,$$s:this})},4),D(i,"$next_token",function(){return this.lexer.$next_token()},0),s=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,33,34,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,36,37,17,18,6,e,5,e,e,17,18,6,e,5,e,e,17,18,e,e,5,23,24,25,26,56,54,55,57],g=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,e,17,15,15,18,18,23,e,18,30,30,23,23,24,e,23,31,31,24,24,25,e,24,44,44,25,25,28,e,25,47,47,28,28,29,e,28,48,48,29,29,33,e,29,49,49,33,33,34,e,33,50,50,34,34,36,e,34,e,e,36,36,37,e,36,e,e,37,37,e,e,37,27,27,27,27,52,52,52,52],S=[-2,4,16,-3,-1,11,e,33,13,35,23,30,1,e,28,40,e,37,44,e,e,-2,e,51,58,65,0,106,72,79,47,54,e,86,93,e,100,107,e,e,e,e,e,e,63,e,e,68,75,82,89,e,120,e,e,e,e,e],v=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],T=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,e,e,21,47,48,40,51,52,49,50,44,46,3,e,e,e,13,e,e,e,e,e,e,e,32],C=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,e,e,4,8,8,5,7,7,8,8,9,5,6,e,e,e,6,e,e,e,e,e,e,e,6],G=[e,6,13,3,9,-1,27,-15,-10,-1,-38],$=[e,e,e,e,e,e,19,16,15,e,e],Z=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],ie=j(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),Q(u[0],"Racc_arg",[s,g,v,S,T,C,$,G,19,Z,ie,58,35,!0]),Q(u[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),Q(u[0],"Racc_debug_parser",!1),D(i,"$_reduce_1",function(q,V,k){var w;return U(this.modifier)||this.$raise(n("ParseError")),w=I(q),this.$parsed(null==w[0]?e:w[0],null==w[1]?e:w[1],null==w[2]?e:w[2],null==w[3]?e:w[3])},3),D(i,"$_reduce_2",function(q,V,k){var w;return U(this.modifier)||this.$raise(n("ParseError")),w=I(q),this.$parsed(null==w[0]?e:w[0],null==w[2]?e:w[2],null==w[1]?e:w[1],null==w[3]?e:w[3])},3),D(i,"$_reduce_3",function(q,V,k){var w,ae;return ae=null==(w=I(q))[2]?e:w[2],this.$parsed(null==w[0]?e:w[0],null==w[1]?e:w[1],p(p(n("Arithmetic"),"Node"),"Number").$new(0),ae)},3),D(i,"$_reduce_4",function(q,V,k){var w=this;return U(w.prefix_number)&&U(w.suffix_number)||w.$raise(n("ParseError")),a(["command","prefix","suffix"],{command:q["$[]"](1),prefix:q["$[]"](0),suffix:q["$[]"](2)})},3),D(i,"$_reduce_5",function(q,V,k){var w=this;return U(w.prefix_number)||w.$raise(n("ParseError")),U(w.need_suffix_number)&&w.$raise(n("ParseError")),a(["command","prefix"],{command:q["$[]"](1),prefix:q["$[]"](0)})},3),D(i,"$_reduce_6",function(q,V,k){var w=this;return U(w.suffix_number)||w.$raise(n("ParseError")),U(w.need_prefix_number)&&w.$raise(n("ParseError")),a(["command","suffix"],{command:q["$[]"](0),suffix:q["$[]"](1)})},3),D(i,"$_reduce_7",function(q,V,k){var w=this;return(U(w.need_prefix_number)||U(w.need_suffix_number))&&w.$raise(n("ParseError")),a(["command"],{command:q["$[]"](0)})},3),D(i,"$_reduce_8",function(q,V,k){return a([],{})},3),D(i,"$_reduce_9",function(q,V,k){var w,ae,se,X=e;return X=null==(w=I(q))[0]?e:w[0],ae=null==w[2]?e:w[2],U(this.critical)&&U(X["$[]"]("critical")["$nil?"]())||this.$raise(n("ParseError")),P(X,"[]=",H(se=["critical",ae])),F(se.length,1),X},3),D(i,"$_reduce_10",function(q,V,k){var w,ae,se,X=e;return X=null==(w=I(q))[0]?e:w[0],ae=null==w[2]?e:w[2],U(this.fumble)&&U(X["$[]"]("fumble")["$nil?"]())||this.$raise(n("ParseError")),P(X,"[]=",H(se=["fumble",ae])),F(se.length,1),X},3),D(i,"$_reduce_11",function(q,V,k){var w,ae,se,X=e;return X=null==(w=I(q))[0]?e:w[0],ae=null==w[2]?e:w[2],U(this.dollar)&&U(X["$[]"]("dollar")["$nil?"]())||this.$raise(n("ParseError")),P(X,"[]=",H(se=["dollar",ae])),F(se.length,1),X},3),D(i,"$_reduce_12",function(q,V,k){return q["$[]"](1)},3),D(i,"$_reduce_13",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"Negative").$new(q["$[]"](1))},3),D(i,"$_reduce_14",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"+",q["$[]"](2))},3),D(i,"$_reduce_15",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"-",q["$[]"](2))},3),D(i,"$_reduce_16",function(q,V,k){return U(this.allowed_cmp_op["$include?"](e))||this.$raise(n("ParseError")),a([],{})},3),D(i,"$_reduce_17",function(q,V,k){var w,X,W;return W=null==(w=I(q))[1]?e:w[1],U(this.allowed_cmp_op["$include?"](X=null==w[0]?e:w[0]))||this.$raise(n("ParseError")),a(["cmp_op","target"],{cmp_op:X,target:W})},3),D(i,"$_reduce_18",function(q,V,k){var ee,w=this;return ee=q["$[]"](0),U(w.question_target)||w.$raise(n("ParseError")),U(w.allowed_cmp_op["$include?"](ee))||w.$raise(n("ParseError")),a(["cmp_op","target"],{cmp_op:ee,target:"?"})},3),D(i,"$_reduce_19",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"+",q["$[]"](2))},3),D(i,"$_reduce_20",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"-",q["$[]"](2))},3),D(i,"$_reduce_22",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"*",q["$[]"](2))},3),D(i,"$_reduce_23",function(q,V,k){return q["$[]"](3).$new(q["$[]"](0),q["$[]"](2))},3),D(i,"$_reduce_25",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"DivideWithGameSystemDefault")},3),D(i,"$_reduce_26",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"DivideWithCeil")},3),D(i,"$_reduce_27",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"DivideWithCeil")},3),D(i,"$_reduce_28",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"DivideWithRound")},3),D(i,"$_reduce_29",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"DivideWithFloor")},3),D(i,"$_reduce_30",function(q,V,k){return q["$[]"](1)},3),D(i,"$_reduce_31",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"Negative").$new(q["$[]"](1))},3),D(i,"$_reduce_33",function(q,V,k){return q["$[]"](1)},3),D(i,"$_reduce_34",function(q,V,k){return p(p(n("Arithmetic"),"Node"),"Number").$new(q["$[]"](0))},3),D(i,"$_reduce_none",function(q,V,k){return q["$[]"](0)},3)},Opal.modules["bcdice/deprecated/checker"]=function(r){var z,H,Q,U,I,o,N,D,M=[],t=r.nil,d=r.module,e=r.send,p=r.eqeqeq,E=r.truthy,B=r.def;return z=M,H=D=[d(M[0],"BCDice")].concat(z),Q=N=[d(D[0],"Deprecated")].concat(H),I=[U=d(N[0],"Checker")].concat(Q),o=r.$r(I),U.$private(),B(U,"$check_result_legacy",function(R,L,A,h){var _,m=this,b=t,y=t,f=t,l=t;return b=e(L,"map",[],"sides".$to_proc()),_=(y=e(L,"map",[],"value".$to_proc())).$sum(),f=p([100],l=b)?m.$check_1D100(R,_,A,h):p([20],l)?m.$check_1D20(R,_,A,h):p([6,6],l)?m.$check_2D6(R,_,y,A,h):t,(E(f["$nil?"]())||E(f["$empty?"]()))&&(f=p([10],l=b.$uniq())?m.$check_nD10(R,_,y,A,h):p([6],l)?m.$check_nD6(R,_,y,A,h):t,E(f["$nil?"]())||E(f["$empty?"]()))?t:o("Result").$new(f.$delete_prefix(" \uff1e "))},4),B(U,"$check_1D100",function(R,L,A,h){return t},4),B(U,"$check_1D20",function(R,L,A,h){return t},4),B(U,"$check_nD10",function(R,L,A,h,m){return t},5),B(U,"$check_2D6",function(R,L,A,h,m){return t},5),B(U,"$check_nD6",function(R,L,A,h,m){return t},5)},Opal.modules["bcdice/base"]=function(r){var L,y,u,s,g,_,f,l,i,h,M=r.top,t=[],d=r.$r(t),e=r.nil,p=r.$$$,E=r.module,B=r.klass,a=r.truthy,z=r.def,Y=r.regexp,D=r.rb_plus,P=r.send,H=r.to_a,F=r.rb_minus,N=r.eqeqeq,j=r.eqeq,Q=r.range,U=r.rb_divide,I=r.rb_times,o=r.rb_ge,c=e;return M.$require("i18n"),M.$require("i18n/backend/fallbacks"),M.$require("bcdice/randomizer"),M.$require("bcdice/dice_table"),M.$require("bcdice/enum"),M.$require("bcdice/translate"),M.$require("bcdice/result"),M.$require("bcdice/command/parser"),M.$require("bcdice/deprecated/checker"),L=t,y=h=[E(t[0],"BCDice")].concat(L),f=[_=B(h[0],null,"Base")].concat(y),l=r.$r(f),(i=_.$$prototype).sort_add_dice=i.sort_barabara_dice=i.enabled_d9=i.raw_input=i.randomizer=i.enabled_upcase_input=i.debug=e,s=[u=r.get_singleton_class(_)].concat(f),g=r.$r(s),u.$attr_reader("prefixes"),z(u,"$register_prefix",function(v){var C,G=this,$=e;return null==G.prefixes&&(G.prefixes=e),C=r.slice.call(arguments),G.prefixes=a($=G.prefixes)?$:[],G.prefixes.$concat(C.$flatten())},-1),z(u,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())},0),z(u,"$prefixes_pattern",function(){var v=this,T=e;return null==v.prefixes_pattern&&(v.prefixes_pattern=e),null==v.prefixes&&(v.prefixes=e),v.prefixes_pattern=a(T=v.prefixes_pattern)?T:e,a(v.prefixes_pattern)?v.prefixes_pattern:(v.prefixes=a(T=v.prefixes)?T:[],v.prefixes.$freeze(),v.prefixes_pattern=(a(v.prefixes["$empty?"]())?/(?!)/:Y(["^(S)?(",v.prefixes.$join("|"),")"],"i")).$freeze())},0),z(u,"$command_pattern",function(){var v=this,T=e,C=e;return null==v.command_pattern&&(v.command_pattern=e),null==v.prefixes&&(v.prefixes=e),v.command_pattern=a(T=v.command_pattern)?T:e,a(v.command_pattern)?v.command_pattern:(v.prefixes=a(T=v.prefixes)?T:[],v.prefixes.$freeze(),C=D(P(p(g("CommonCommand"),"COMMANDS"),"map",[],function($){return null==$&&($=e),p($,"PREFIX_PATTERN").$source()},1),v.prefixes),v.command_pattern=Y(["^S?(",C.$join("|"),")"],"i").$freeze())},0),z(u,"$eval",function(v){return this.$new(v).$eval()},1),_.$include(l("Translate")),_.$include(p(l("Deprecated"),"Checker")),z(_,"$initialize",function(n){var s=this;return s.raw_input=n,s.sort_add_dice=!1,s.sort_barabara_dice=!1,s.d66_sort_type=p(l("D66SortType"),"NO_SORT"),s.enabled_d9=!1,s.round_type=p(l("RoundType"),"FLOOR"),s.sides_implicit_d=6,s.upper_dice_reroll_threshold=e,s.reroll_dice_reroll_threshold=e,s.default_cmp_op=e,s.default_target_number=e,s.enabled_upcase_input=!0,s.locale="ja_jp",s.randomizer=p(l("BCDice"),"Randomizer").$new(),s.debug=!1},1),_.$attr_accessor("randomizer"),_.$attr_reader("d66_sort_type"),_.$attr_reader("round_type"),_.$attr_reader("sides_implicit_d"),_.$attr_reader("upper_dice_reroll_threshold"),_.$attr_reader("reroll_dice_reroll_threshold"),_.$attr_reader("default_cmp_op"),_.$attr_reader("default_target_number"),z(_,"$sort_add_dice?",function(){return this.sort_add_dice},0),z(_,"$sort_barabara_dice?",function(){return this.sort_barabara_dice},0),z(_,"$enabled_d9?",function(){return this.enabled_d9},0),z(_,"$enable_debug",function(){return this.debug=!0},0),z(_,"$eval",function(){var s,g,S,n=this,v=e;return s=p(l("BCDice"),"Preprocessor").$process(n.raw_input,n),g=a(S=n.$dice_command(s))?S:n.$eval_common_command(n.raw_input),a(g)?(v=[n.randomizer.$rand_results()],P(g,"rands=",H(v)),F(v.length,1),v=[n.randomizer.$detailed_rand_results()],P(g,"detailed_rands=",H(v)),F(v.length,1),g):e},0),z(_,"$change_text",function(n){return n},1),z(_,"$check_result",function(n,s,g,S){var v=this,T=e,C=e,G=e,$=e,Z=e;return T=v.$check_result_legacy(n,s,g,S),a(T)?T:(C=P(s,"map",[],"sides".$to_proc()),$=(G=P(s,"map",[],"value".$to_proc())).$sum(),T=N([100],Z=C)?v.$result_1d100(n,$,g,S):N([20],Z)?v.$result_1d20(n,$,g,S):N([6,6],Z)?v.$result_2d6(n,$,G,g,S):e,j(T,l("Result").$nothing())?e:a(T)?T:(T=N([10],Z=C.$uniq())?v.$result_nd10(n,$,G,g,S):N([6],Z)?v.$result_nd6(n,$,G,g,S):e,j(T,l("Result").$nothing())?e:a(T)?T:v.$result_ndx(n,g,S)))},4),z(_,"$grich_text",function(n,s,g){return e},3),_.$private(),z(_,"$eval_common_command",function(n){try{return n=this.$change_text(n),P(p(l("CommonCommand"),"COMMANDS"),"each",[],function g(S){var T,v=null==g.$$s?this:g.$$s;if(null==v.randomizer&&(v.randomizer=e),null==S&&(S=e),T=S.$eval(n,v,v.randomizer),!a(T))return e;r.ret(T)},{$$arity:1,$$s:this}),e}catch(g){if(g===r.returner)return g.$v;throw g}},1),z(_,"$dice_command",function(n){var s=this,g=e,S=e,v=e,T=e,C=e;return a(s.enabled_upcase_input)&&(n=n.$upcase()),g=s.$class().$prefixes_pattern().$match(n),a(g)?(S=g["$[]"](1)["$nil?"]()["$!"](),a(S)&&(n=n["$[]"](Q(1,-1,!1))),v=s.$eval_game_system_specific_command(n),a(v["$is_a?"](l("Result")))?(T=[a(C=v["$secret?"]())?C:S],P(v,"secret=",H(T)),F(T.length,1),v):a(v["$nil?"]())||a(v["$empty?"]())||j(v,"1")?e:P(l("Result").$new(),"tap",[],function($){return null==$&&($=e),T=[v.$to_s()],P($,"text=",H(T)),F(T.length,1),P($,"secret=",H(T=[S])),T[F(T.length,1)]},1)):e},1),z(_,"$eval_game_system_specific_command",function(n){return e},1),z(_,"$result_ndx",function(n,s,g){return a(g["$is_a?"](l("String")))?e:a(n.$send(s,g))?l("Result").$success(this.$translate("success")):l("Result").$failure(this.$translate("failure"))},3),z(_,"$result_1d100",function(n,s,g,S){return e},4),z(_,"$result_1d20",function(n,s,g,S){return e},4),z(_,"$result_nd10",function(n,s,g,S,v){return e},5),z(_,"$result_2d6",function(n,s,g,S,v){return e},5),z(_,"$result_nd6",function(n,s,g,S,v){return e},5),z(_,"$get_table_by_2d6",function(n){return this.$get_table_by_nD6(n,2)},1),z(_,"$get_table_by_1d6",function(n){return this.$get_table_by_nD6(n,1)},1),z(_,"$get_table_by_nD6",function(n,s){return this.$get_table_by_nDx(n,s,6)},2),z(_,"$get_table_by_nDx",function(n,s,g){var v,T=e;return v=this.randomizer.$roll_sum(s,g),T=this.$get_table_value(n["$[]"](F(v,s))),a(T["$nil?"]())?["1",0]:[T,v]},3),z(_,"$get_table_by_1d3",function(n){var S,v,s=this,T=e;return s.$debug("get_table_by_1d3"),S=s.randomizer.$roll_sum(1,6),s.$debug("num",S),v=U(F(S,1),2).$to_i(),s.$debug("index",v),T=n["$[]"](v),a(T["$nil?"]())?["1",0]:[T,S]},1),z(_,"$get_table_by_d66_swap",function(n){var g;return g=this.randomizer.$roll_d66(p(l("D66SortType"),"ASC")),[this.$get_table_by_number(g,n),g]},1),z(_,"$get_table_by_d66",function(n){var g,S,v,C,T=e;return g=this.randomizer.$roll_once(6),S=this.randomizer.$roll_once(6),v=D(I(F(g,1),6),F(S,1)),T=n["$[]"](v),C=""+g+S,a(T["$nil?"]())?["1",C]:[T,C]},1),z(_,"$get_table_by_number",function(n,s,g){try{return null==g&&(g="1"),P(s,"each",[],function v(T){var G,C=null==v.$$s?this:v.$$s;if(null==T&&(T=e),G=T["$[]"](0),!a(o(G,n)))return e;r.ret(C.$get_table_value(T["$[]"](1)))},{$$arity:1,$$s:this}),this.$get_table_value(g)}catch(v){if(v===r.returner)return v.$v;throw v}},-3),z(_,"$get_table_value",function(n){return a(n["$is_a?"](l("Proc")))?n.$call():n},1),z(_,"$roll_tables",function(n,s){var S=e;return S=s["$[]"](n),a(S)?S.$roll(this.randomizer).$to_s():e},2),z(_,"$debug",function(n,s){var S,v=this,T=e,C=e;return S=r.slice.call(arguments,1),a(v.debug)?(T=a(n["$is_a?"](l("String")))?n:n.$inspect(),a(S["$empty?"]())?v.$warn(T):(C=P(S,"map",[],function($){return null==$&&($=e),a($["$is_a?"](l("String")))?'"'+$+'"':$.$inspect()},1),v.$warn(T+": "+C.$join(", ")))):e},-2),p(p(d("I18n"),"Backend"),"Simple").$include(p(p(d("I18n"),"Backend"),"Fallbacks")),d("I18n").$load_path()["$<<"](d("Dir")["$[]"](d("File").$join("bcdice","../../i18n/**/*.yml"))),c=["ja_jp"],P(d("I18n"),"default_locale=",H(c)),F(c.length,1),c=[["ja_jp"]],P(d("I18n").$fallbacks(),"defaults=",H(c)),c[F(c.length,1)]},Opal.queue(function(r){var c,h,l,i,u,n,b,y,L,t=[],d=r.nil,e=r.$$$,p=r.module,E=r.klass,B=r.const_set,a=r.hash2,z=r.truthy,Y=r.eqeq,D=r.send,P=r.rb_plus,H=r.rb_times,F=r.to_a,N=r.rb_minus,j=r.def,Q=r.not,U=r.rb_le,I=r.rb_ge;return r.top.$require("bcdice/base"),c=t,h=L=[p(t[0],"BCDice")].concat(c),b=[p(L[0],"GameSystem")].concat(h),y=r.$r(b),l=b,u=[i=E(b[0],y("Base"),"SamsaraBallad")].concat(l),n=r.$r(u),i.$$prototype.randomizer=d,B(u[0],"ID","SamsaraBallad"),B(u[0],"NAME","\u30b5\u30f3\u30b5\u30fc\u30e9\u30fb\u30d0\u30e9\u30c3\u30c9"),B(u[0],"SORT_KEY","\u3055\u3093\u3055\u3042\u3089\u306f\u3089\u3064\u3068"),B(u[0],"HELP_MESSAGE","SB\t \u901a\u5e38\u306eD100\u30ed\u30fc\u30eb\u3092\u884c\u3046\nSBS\t \u30b9\u30ef\u30c3\u30d7\u30ed\u30fc\u30eb\u3067D100\u30ed\u30fc\u30eb\u3092\u884c\u3046\nSB#x@y\t F\u5024\u3092x\u3001C\u5024\u3092y\u3068\u3057\u3066\u901a\u5e38\u306eD100\u30ed\u30fc\u30eb\u3092\u884c\u3046\nSBS#x@y\t F\u5024\u3092x\u3001C\u5024\u3092y\u3068\u3057\u3066\u30b9\u30ef\u30c3\u30d7\u30ed\u30fc\u30eb\u3067D100\u30ed\u30fc\u30eb\u3092\u884c\u3046\n\n\u4f8b\uff1a\nSB<=85 \u901a\u5e38\u306e\u6280\u80fd\u3067\u6210\u529f\u738785%\u306e\u5224\u5b9a\nSBS<=70 \u7fd2\u719f\u3092\u5f97\u305f\u6280\u80fd\u3067\u6210\u529f\u738770%\u306e\u5224\u5b9a\nSBS#3@7<=80 \u7fd2\u719f\u3092\u5f97\u305f\u6280\u80fd\u3067\u3001F\u50243\u3001C\u50247\u3067\u6210\u529f\u738780%\u306e\u653b\u6483\u5224\u5b9a\nSB<57 \u901a\u5e38\u306e\u6280\u80fd\u3067\u3001\u80fd\u52d5\u5074\u306e\u9054\u6210\u5024\u304c57\u306e\u53d7\u52d5\u5224\u5b9a\nSBS<70 \u7fd2\u719f\u3092\u5f97\u305f\u6280\u80fd\u3067\u3001\u80fd\u52d5\u5074\u306e\u9054\u6210\u5024\u304c70\u306e\u53d7\u52d5\u5224\u5b9a\n"),i.$register_prefix("SBS?"),j(i,"$eval_game_system_specific_command",function(S){var v=this,C=d,G=d,$=d,Z=d,x=d,O=d,ie=d,ne=d,ce=d,K=d;return v.$debug("eval_game_system_specific_command Begin"),C=e(n("Command"),"Parser").$new("SBS","SB",a(["round_type"],{round_type:v.$round_type()})).$enable_critical().$enable_fumble().$restrict_cmp_op_to(d,"<=","<").$parse(S),z(C)?(Y(C.$command(),"SB")?(G=d,$=v.randomizer.$roll_once(100)):(G=(Z=v.randomizer.$roll_once(10))+","+(x=v.randomizer.$roll_once(10)),O=D([Z,x],"map",[],function(V){return null==V&&(V=d),Y(V,10)?0:V},1).$sort(),$=P(H(O["$[]"](0),10),O["$[]"](1)),Y($,0)&&($=100)),ie=v.$compare($,C),ne=z(ie["$failure?"]())?"\u5931\u6557":z(ie["$success?"]())?"\u6210\u529f":d,ce=z(ie["$fumble?"]())?"\u30d5\u30a1\u30f3\u30d6\u30eb":z(ie["$critical?"]())?"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb":d,K=[["(D100"+C.$cmp_op()+C.$target_number()+")",G,$.$to_s(),ne,ce].$compact().$join(" \uff1e ")],D(ie,"text=",F(K)),N(K.length,1),ie):d},1),i.$private(),j(i,"$compare",function(S,v){var T=this;return z(["<=","<"]["$include?"](v.$cmp_op()))?Q(S.$send(v.$cmp_op(),v.$target_number()))?n("Result").$failure(d):z(T["$fumble_?"](S,v.$fumble()))?D(n("Result").$new(),"tap",[],function(G){var $=d;return null==G&&(G=d),D(G,"success=",F($=[!0])),N($.length,1),D(G,"fumble=",F($=[!0])),$[N($.length,1)]},1):z(T["$critical_?"](S,v.$critical()))?n("Result").$critical(d):n("Result").$success(d):z(T["$fumble_?"](S,v.$fumble()))?D(n("Result").$new(),"tap",[],function(G){var $;return null==G&&(G=d),D(G,"fumble=",F($=[!0])),$[N($.length,1)]},1):z(T["$critical_?"](S,v.$critical()))?D(n("Result").$new(),"tap",[],function(G){var $;return null==G&&(G=d),D(G,"critical=",F($=[!0])),$[N($.length,1)]},1):n("Result").$new()},2),j(i,"$fumble_?",function(S,v){var T;return z(T=v)?U(S["$%"](10),v):T},2),j(i,"$critical_?",function(S,v){var T;return z(T=v)?I(S["$%"](10),v):T},2)})}}]);