(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[8857],{8857:(ie,te,ne)=>{ne(9993),Opal.modules["bcdice/game_system/beginning_idol/chain_table"]=function(e){var C,P,p,W,S,B,A,T,M,j,U,d,h=[],t=e.nil,l=e.module,a=e.klass,D=e.truthy,y=e.def,I=e.rb_minus,k=e.send;return C=h,P=d=[l(h[0],"BCDice")].concat(C),j=[l(d[0],"GameSystem")].concat(P),U=e.$r(j),p=j,W=M=[a(j[0],U("Base"),"BeginningIdol")].concat(p),B=[S=a(M[0],null,"ChainTable")].concat(W),A=e.$r(B),(T=S.$$prototype).times=T.sides=T.items=T.name=t,y(S,"$initialize",function(m,b,i){var $=this,n=t;return $.name=m,$.items=i.$freeze(),n=/^(\d+)D(\d+)$/i.$match(b),D(n)||$.$raise(A("ArgumentError"),"Unexpected table type: "+b),$.times=n["$[]"](1).$to_i(),$.sides=n["$[]"](2).$to_i()},3),y(S,"$roll",function(m){var i,$,n,u,b=this;return i=m.$roll_sum(b.times,b.sides),$=I(i,b.times),n=b.items["$[]"]($),u=k(n,"map",[],function(_){return null==_&&(_=t),D(_["$respond_to?"]("roll"))?_.$roll(m):_},1).$join("\n"),b.name+"("+i+") \uff1e "+u},1)},Opal.modules["bcdice/game_system/beginning_idol/chain_d66_table"]=function(e){var R,V,q,S,B,x,U,w,G,h=[],t=e.nil,l=e.module,a=e.klass,D=e.def,y=e.rb_plus,I=e.rb_times,k=e.send,L=e.truthy;return R=h,V=G=[l(h[0],"BCDice")].concat(R),U=[l(G[0],"GameSystem")].concat(V),w=e.$r(U),q=U,x=[a(U[0],w("Base"),"BeginningIdol")].concat(q),(B=(S=a(x[0],null,"ChainD66Table")).$$prototype).items=B.name=t,D(S,"$initialize",function(T,v){return this.name=T,this.items=v.$freeze()},2),D(S,"$roll",function(T){var i,$,m=t,b=t;return m=T.$roll_barabara(2,6).$sort(),b=y(I(m["$[]"](0),10),m["$[]"](1)),i=this.items["$[]"](b.$to_s()),$=k(i,"map",[],function(u){return null==u&&(u=t),L(u["$respond_to?"]("roll"))?u.$roll(T):u},1).$join("\n"),this.name+"("+b+") \uff1e "+$},1)},Opal.modules["bcdice/game_system/beginning_idol/bad_status_table"]=function(e){var P,w,F,T,v,m,b,S,p,q,j,h=[],t=e.nil,l=e.module,a=e.klass,D=e.def,y=e.truthy,I=e.send,k=e.rb_le,L=e.hash2,C=e.rb_gt,R=e.rb_plus,d=e.rb_minus;return P=h,w=j=[l(h[0],"BCDice")].concat(P),p=[l(j[0],"GameSystem")].concat(w),q=e.$r(p),F=p,T=S=[a(p[0],q("Base"),"BeginningIdol")].concat(F),m=[v=a(S[0],null,"BadStatusTable")].concat(T),b=e.$r(m),v.$$prototype.locale=t,D(v,"$initialize",function(n){return this.locale=n},1),D(v,"$roll_command",function(n,u){var o,c=t,s=t,r=t;return c=/^BT(\d+)?$/.$match(u),y(c)?(s=y(r=(o=c["$[]"](1))===t||null==o?t:I(o,"to_i",[]))?r:1,this.$roll(n,s)):t},2),D(v,"$roll",function(n,u){var o=this,_=t,c=t,s=t,r=t,f=t,g=t,z=t;return null==u&&(u=1),y(k(u,0))?t:(_=b("I18n").$t("BeginningIdol.BT.name",L(["locale"],{locale:o.locale})),c=b("I18n").$t("BeginningIdol.BT.items",L(["locale"],{locale:o.locale})),s=b("I18n").$t("BeginningIdol.BT.prefix_format",L(["locale"],{locale:o.locale})),f=(r=n.$roll_barabara(u,6).$sort()).$uniq(),y(C(f.$size(),1))&&(g=R(o.$format(s,L(["count_bad_status"],{count_bad_status:f.$size()})),"\n")),z=I(f,"map",[],function(N){return null==N&&(N=t),c["$[]"](d(N,1))},1).$join("\n"),_+" \uff1e ["+r.$join(",")+"] \uff1e "+g+z)},-2)},Opal.modules["bcdice/game_system/beginning_idol/random_event_table"]=function(e){var C,P,p,W,S,B,A,M,j,U,d,h=[],t=e.nil,l=e.$$$,a=e.module,D=e.klass,y=e.def,I=e.truthy,k=e.hash2;return C=h,P=d=[a(h[0],"BCDice")].concat(C),j=[a(d[0],"GameSystem")].concat(P),U=e.$r(j),p=j,W=M=[D(j[0],U("Base"),"BeginningIdol")].concat(p),B=[S=D(M[0],null,"RandomEventTable")].concat(W),A=e.$r(B),S.$$prototype.locale=t,y(S,"$initialize",function(m){return this.locale=m},1),y(S,"$roll",function(m){var n,o,_,b=this,i=t,$=t,u=t,c=t;return i=m.$roll_once(6),$=m.$roll_d66(l(A("D66SortType"),"NO_SORT")),n=I(i["$even?"]())?"BeginningIdol.RE.on_event":"BeginningIdol.RE.off_event",u=A("I18n").$t(n,k(["locale"],{locale:b.locale})),o=A("I18n").$t("BeginningIdol.RE.name",k(["locale"],{locale:b.locale})),_=A("I18n").$t("BeginningIdol.RE.format",k(["locale"],{locale:b.locale})),c=u["$[]"]("items")["$[]"]($.$to_s()),o+" \uff1e (1D6) \uff1e "+i+"\n"+u["$[]"]("name")+" \uff1e ["+$+"] \uff1e "+b.$format(_,k(["event","page"],{event:c["$[]"](0),page:c["$[]"](1)}))},1)},Opal.modules["bcdice/game_system/beginning_idol/my_skill_name_table"]=function(e){var G,U,x,A,T,v,m,b,W,E,p,V,h=[],t=e.nil,l=e.$$$,a=e.module,D=e.klass,y=e.def,I=e.send,k=e.rb_minus,L=e.rb_plus,C=e.hash2,R=e.to_a;return G=h,U=V=[a(h[0],"BCDice")].concat(G),E=[a(V[0],"GameSystem")].concat(U),p=e.$r(E),x=E,A=W=[D(E[0],p("Base"),"BeginningIdol")].concat(x),v=[T=D(W[0],null,"MySkillNameTable")].concat(A),m=e.$r(v),(b=T.$$prototype).chains=b.locale=t,y(T,"$initialize",function($){var u=t,o=t,_=t,c=t,s=t;return this.locale=$,u=l(m("DiceTable"),"Table").$from_i18n("BeginningIdol.MS.subtables.article",$),o=l(m("DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.describe",$),_=l(m("DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.scene",$),c=l(m("DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.material",$),s=l(m("DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.action",$),this.chains=[[o,_,c],[o,_,s],[o,c,s],[_,c,s],[o,_,u],[c,s,u]].$freeze()},1),y(T,"$roll",function($){var u,o,c,r,n=this,_=t,s=t;return u=$.$roll_once(6),o=I(n.chains["$[]"](k(u,1)),"map",[],function(g){return null==g&&(g=t),g.$roll($)},1),_=I(o,"map",[],function(g){return null==g&&(g=t),L(g.$table_name(),g.$value().$to_s())},1),c=m("I18n").$t("BeginningIdol.MS.name",C(["locale"],{locale:n.locale})),s=m("I18n").$t("BeginningIdol.MS.formats",C(["locale"],{locale:n.locale}))["$[]"](k(u,1)),r=I(n,"format",[s].concat(R(I(o,"map",[],"body".$to_proc())))),c+" \uff1e ["+u+","+_.$join(",")+"] \uff1e "+r},1)},Opal.modules["bcdice/game_system/beginning_idol/d6_twice_table"]=function(e){var R,V,q,S,B,A,T,v,x,U,w,G,h=[],t=e.nil,l=e.module,a=e.klass,D=e.hash2,y=e.defs,I=e.def,k=e.to_ary,L=e.rb_minus;return R=h,V=G=[l(h[0],"BCDice")].concat(R),U=[l(G[0],"GameSystem")].concat(V),w=e.$r(U),q=U,S=x=[a(U[0],w("Base"),"BeginningIdol")].concat(q),A=[B=a(x[0],null,"D6TwiceTable")].concat(S),T=e.$r(A),(v=B.$$prototype).items1=v.items2=v.name=t,y(B,"$from_i18n",function(b,i){var n=t;return n=T("I18n").$t(b,D(["locale"],{locale:i})),this.$new(n["$[]"]("name"),n["$[]"]("items1"),n["$[]"]("items2"))},2),I(B,"$initialize",function(b,i,$){var n=this;return n.name=b,n.items1=i,n.items2=$},3),I(B,"$roll",function(b){var i,$,u,o,_,c,n=this;return $=b.$roll_barabara(2,6),o=null==(i=k($))[1]?t:i[1],_=n.items1["$[]"](L(u=null==i[0]?t:i[0],1)),c=n.items2["$[]"](L(o,1)),n.name+"["+u+","+o+"] \uff1e "+_+c},1)},Opal.modules["bcdice/game_system/beginning_idol/item_table"]=function(e){var G,U,x,A,T,v,m,W,E,p,V,h=[],t=e.nil,l=e.module,a=e.klass,D=e.def,y=e.truthy,I=e.send,k=e.eqeq,L=e.hash2,C=e.rb_minus,R=e.neqeq;return G=h,U=V=[l(h[0],"BCDice")].concat(G),E=[l(V[0],"GameSystem")].concat(U),p=e.$r(E),x=E,A=W=[a(E[0],p("Base"),"BeginningIdol")].concat(x),v=[T=a(W[0],null,"ItemTable")].concat(A),m=e.$r(v),T.$$prototype.locale=t,D(T,"$initialize",function($){return this.locale=$},1),D(T,"$roll_command",function($,n){var u,_=t,c=t,s=t;return _=/^IT(\d+)?$/.$match(n),y(_)?(c=y(s=(u=_["$[]"](1))===t||null==u?t:I(u,"to_i",[]))?s:1,this.$roll($,c)):t},2),D(T,"$roll",function($,n){var o=t,_=t,c=t,s=t;return null==n&&(n=1),k(n,0)?t:(o=m("I18n").$t("BeginningIdol.item_table",L(["locale"],{locale:this.locale})),_=$.$roll_barabara(n,6).$sort(),c=I(_,"group_by",[],"itself".$to_proc()),s=I(c,"map",[],function r(f,g){var z=null==r.$$s?this:r.$$s,H=t;return null==f&&(f=t),null==g&&(g=t),H=o["$[]"]("items")["$[]"](C(f,1)),R(c.$size(),1)&&(H=z.$format(o["$[]"]("emph"),L(["item"],{item:H}))),k(_.$size(),c.$size())?H:z.$format(o["$[]"]("counting"),L(["item","count"],{item:H,count:g.$size()}))},{$$arity:2,$$s:this}),o["$[]"]("name")+" \uff1e ["+_.$join(",")+"] \uff1e "+s.$join(o["$[]"]("sep")))},-2)},Opal.modules["bcdice/game_system/beginning_idol/costume_table"]=function(e){var R,V,q,S,B,A,T,v,x,U,w,G,h=[],t=e.nil,l=e.$$$,a=e.module,D=e.klass,y=e.hash2,I=e.defs,k=e.def,L=e.send;return R=h,V=G=[a(h[0],"BCDice")].concat(R),U=[a(G[0],"GameSystem")].concat(V),w=e.$r(U),q=U,S=x=[D(U[0],w("Base"),"BeginningIdol")].concat(q),A=[B=D(x[0],null,"CostumeTable")].concat(S),T=e.$r(A),(v=B.$$prototype).name=v.items=t,I(B,"$from_i18n",function(b,i){var n=t;return n=T("I18n").$t(b,y(["locale"],{locale:i})),this.$new(n["$[]"]("name"),n["$[]"]("items"))},2),k(B,"$initialize",function(b,i){return this.name=b,this.items=i},2),k(B,"$roll",function(b){var $=t;return $=b.$roll_d66(l(T("D66SortType"),"ASC")),this.name+"("+$+") \uff1e "+this.items["$[]"]($.$to_s())},1),k(B,"$brand_only",function(){return l(T("DiceTable"),"D66Table").$new(this.name,l(T("D66SortType"),"ASC"),L(this.items,"transform_values",[],function($){return null==$&&($=t),$.$split("\n").$first()},1))},0)},Opal.modules["bcdice/game_system/beginning_idol/accessories_table"]=function(e){var L,G,E,M,F,W,p,q,V,j,R,h=[],t=e.nil,l=e.$$$,a=e.module,D=e.klass,y=e.hash2,I=e.def;return L=h,G=R=[a(h[0],"BCDice")].concat(L),V=[a(R[0],"GameSystem")].concat(G),j=e.$r(V),E=V,q=[p=D(V[0],j("Base"),"BeginningIdol")].concat(E),F=[M=e.get_singleton_class(p)].concat(q),W=e.$r(F),M.$private(),I(M,"$translate_accessories_table",function(B){var T,A=t;return A=W("I18n").$t("BeginningIdol.ACT.items",y(["locale"],{locale:B})),T=[l(W("DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.head",B),l(W("DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.hat",B),l(W("DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.body",B),l(W("DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.arm",B),l(W("DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.foot",B),l(W("DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.other",B)],W("ChainTable").$new(W("I18n").$t("BeginningIdol.ACT.name",y(["locale"],{locale:B})),"1D6",A.$zip(T))},1)},Opal.modules["bcdice/game_system/beginning_idol/with_abnormality"]=function(e){var P,w,M,x,F,T,v,m,b,S,B,p,q,j,h=[],t=e.nil,l=e.$$$,a=e.module,D=e.klass,y=e.hash2,I=e.truthy,k=e.def,L=e.send,C=e.defs,R=e.send2,d=e.find_super;return P=h,w=j=[a(h[0],"BCDice")].concat(P),p=[a(j[0],"GameSystem")].concat(w),q=e.$r(p),M=p[0],x=q("Base"),F=p,S=[D(M,x,"BeginningIdol")].concat(F),B=e.$r(S),T=S,m=[v=a(S[0],"WithAbnormality")].concat(T),b=e.$r(m),k(v,"$replace_abnormality",function($,n){var u=this,o=t,_=t,c=t,s=t,r=t;return null==u.locale&&(u.locale=t),null==u.bad_status_table&&(u.bad_status_table=t),_=(o=b("Regexp").$new(b("I18n").$t("BeginningIdol.abnormality.regexp",y(["locale"],{locale:u.locale})))).$match($.$body()),I(_)&&(c=u.$kanji_to_i(_["$[]"](1)),I(c))?(s=u.bad_status_table.$roll(n,c),r=$.$body().$sub(o,s),l(b("DiceTable"),"RollResult").$new($.$table_name(),$.$value(),r)):$},2),k(v,"$kanji_to_i",function($){var n,u=this;return null==u.locale&&(u.locale=t),(n=b("I18n").$t("BeginningIdol.abnormality.num_map",y(["locale"],{locale:u.locale})).$find_index($))===t||null==n?t:L(n,"succ",[])},1),function(A,T,v){var m=D(A,T,"D66WithAbnormality"),b=[m].concat(v),i=e.$r(b);m.$include(i("WithAbnormality")),C(m,"$from_i18n",function(n,u,o){var s,c=t;return c=i("I18n").$t(n,y(["locale"],{locale:o})),s=i("D66SortType").$const_get(c["$[]"]("d66_sort_type")),this.$new(c["$[]"]("name"),s,c["$[]"]("items"),u,o)},3),k(m,"$initialize",function $(n,u,o,_,c){var r=this;return delete $.$$p,R(r,d(r,"initialize",$,!1,!0),"initialize",[n,u,o],null),r.bad_status_table=_,r.locale=c},5),k(m,"$roll",function $(n){var _,o=this;return delete $.$$p,_=R(o,d(o,"roll",$,!1,!0),"roll",[n],null),o.$replace_abnormality(_,n)},1)}(S[0],l(B("DiceTable"),"D66Table"),S),function(A,T,v){var m=D(A,T,"TableWithAbnormality"),b=[m].concat(v),i=e.$r(b);return m.$include(i("WithAbnormality")),C(m,"$from_i18n",function(n,u,o){var c=t;return c=i("I18n").$t(n,y(["locale"],{locale:o})),this.$new(c["$[]"]("name"),c["$[]"]("type"),c["$[]"]("items"),u,o)},3),k(m,"$initialize",function $(n,u,o,_,c){var r=this;return delete $.$$p,R(r,d(r,"initialize",$,!1,!0),"initialize",[n,u,o],null),r.bad_status_table=_,r.locale=c},5),k(m,"$roll",function $(n){var _,o=this;return delete $.$$p,_=R(o,d(o,"roll",$,!1,!0),"roll",[n],null),o.$replace_abnormality(_,n)},1)}(S[0],l(B("DiceTable"),"Table"),S)},Opal.modules["bcdice/game_system/beginning_idol/work_table"]=function(e){var V,E,W,m,b,i,$,n,S,B,A,q,M,U,h=[],t=e.nil,l=e.$$$,a=e.module,D=e.klass,y=e.hash2,I=e.defs,k=e.send2,L=e.find_super,C=e.def,R=e.truthy,d=e.send,G=e.rb_ge;return V=h,E=U=[a(h[0],"BCDice")].concat(V),q=[a(U[0],"GameSystem")].concat(E),M=e.$r(q),W=q,B=[S=D(q[0],M("Base"),"BeginningIdol")].concat(W),A=e.$r(B),m=B,i=[b=D(B[0],l(A("DiceTable"),"D66Table"),"WorkWithChanceTable")].concat(m),$=e.$r(i),(n=b.$$prototype).regexp=n.off=t,I(b,"$from_i18n",function(o,_){var r,s=t;return s=$("I18n").$t(o,y(["locale"],{locale:_})),r=$("D66SortType").$const_get(s["$[]"]("d66_sort_type")),this.$new(s["$[]"]("name"),r,s["$[]"]("items"),_)},2),C(b,"$initialize",function u(o,_,c,s){var f=this;return delete u.$$p,k(f,L(f,"initialize",u,!1,!0),"initialize",[o,_,c],null),f.regexp=$("Regexp").$new($("I18n").$t("BeginningIdol.with_chance.regexp",y(["locale"],{locale:s}))),f.off=$("I18n").$t("BeginningIdol.with_chance.off_text",y(["locale"],{locale:s}))},4),C(b,"$roll_command",function(o,_){var c,r=t;return r=/^LO([1-6]{1,2})?$/.$match(_),R(r)?this.$roll(o,(c=r["$[]"](1))===t||null==c?t:d(c,"to_i",[])):t},2),C(b,"$roll",function u(o,_){var s=this,r=t,f=t;return delete u.$$p,null==_&&(_=t),r=k(s,L(s,"roll",u,!1,!0),"roll",[o],null),R(_)?(f=s.regexp.$match(r.$body()),R(f)&&R(G(f["$[]"](1).$to_i(),_))?l($("DiceTable"),"RollResult").$new(r.$table_name(),r.$value(),s.off):R(f)?l($("DiceTable"),"RollResult").$new(r.$table_name(),r.$value(),r.$body().$sub(s.regexp,"")):r):r},-2),function(T,v){var m=[T].concat(v),b=e.$r(m);T.$private(),C(T,"$translate_local_work_table",function($){return b("WorkWithChanceTable").$from_i18n("BeginningIdol.local_work",$)},1)}(e.get_singleton_class(S),B),S.$register_prefix("LO")},Opal.modules["bcdice/game_system/beginning_idol/skill_table"]=function(e){var V,E,x,F,W,T,v,m,B,A,q,M,U,h=[],t=e.nil,l=e.$$$,a=e.module,D=e.klass,y=e.def,I=e.hash2,k=e.defs,L=e.send2,C=e.find_super,R=e.truthy,d=e.rb_plus,G=e.send;return V=h,E=U=[a(h[0],"BCDice")].concat(V),q=[a(U[0],"GameSystem")].concat(E),M=e.$r(q),x=q[0],F=M("Base"),W=q,B=[D(x,F,"BeginningIdol")].concat(W),A=e.$r(B),T=B[0],v=l(A("DiceTable"),"SaiFicSkillTable"),m=D(T,v,"SkillTable"),y(m,"$roll",function(i){return this.$roll_command(i,"RTT")},1),function(T,v,m){var b=D(T,v,"SkillGetTable"),i=[b].concat(m),$=e.$r(i);b.$$prototype.reroll_reg=t,k(b,"$from_i18n",function(o,_,c){var r=t;return r=$("I18n").$t(o,I(["locale"],{locale:c})),this.$new(r["$[]"]("name"),r["$[]"]("type"),r["$[]"]("items"),_,c)},3),y(b,"$initialize",function u(o,_,c,s,r){var g=this,z=t;return delete u.$$p,L(g,C(g,"initialize",u,!1,!0),"initialize",[o,_,c],null),g.skill_table=s,z=$("I18n").$t("BeginningIdol.skill_get_table",I(["locale"],{locale:r})),g.reroll_reg=$("Regexp").$new(z["$[]"]("reroll_reg")),g.reroll=z["$[]"]("reroll"),g.secondary_name=z["$[]"]("secondary_name")},5),y(b,"$roll",function u(o){var c=this,s=t,r=t,f=t,g=t;return delete u.$$p,s=L(c,C(c,"roll",u,!1,!0),"roll",[o],null),r=c.reroll_reg.$match(s.$body()),R(r)?(f=r.$captures(),g=d(s.$body(),"\n"),function(){var z=e.new_brk();try{G(c,"loop",[],function H(){var N=null==H.$$s?this:H.$$s,Y=t;return null==N.skill_table&&(N.skill_table=t),null==N.secondary_name&&(N.secondary_name=t),null==N.reroll&&(N.reroll=t),Y=N.skill_table.$roll_skill(o),g=d(g,N.secondary_name+" \uff1e ["+Y.$category_dice()+","+Y.$row_dice()+"] \uff1e "+Y),R(f["$include?"](Y.$category_name()))||e.brk(t,z),g=d(g," \uff1e "+N.reroll+"\n")},{$$arity:0,$$s:c,$$brk:z})}catch(H){if(H===z)return H.$v;throw H}}(),l($("DiceTable"),"RollResult").$new(s.$table_name(),s.$value(),g)):s},1)}(B[0],l(A("DiceTable"),"Table"),B),function(T,v){var m=D(T,null,"SkillHometown");return m.$$prototype.skill_name=t,y(m,"$initialize",function($){return this.skill_name=$},1),y(m,"$roll",function($){return this.skill_name.$roll_command($,"AT6")},1)}(B[0])},Opal.modules["bcdice/game_system/beginning_idol/table"]=function(e){var j,p,S,v,b,i,B,A,T,M,x,w,h=e.top,t=[],l=e.nil,a=e.$$$,D=e.module,y=e.klass,I=e.hash2,k=e.def,L=e.send,C=e.truthy,R=e.eqeq,d=e.to_a,G=e.rb_minus,P=e.const_set;return h.$require("bcdice/game_system/beginning_idol/chain_table"),h.$require("bcdice/game_system/beginning_idol/chain_d66_table"),h.$require("bcdice/game_system/beginning_idol/bad_status_table"),h.$require("bcdice/game_system/beginning_idol/random_event_table"),h.$require("bcdice/game_system/beginning_idol/my_skill_name_table"),h.$require("bcdice/game_system/beginning_idol/d6_twice_table"),h.$require("bcdice/game_system/beginning_idol/item_table"),h.$require("bcdice/game_system/beginning_idol/costume_table"),h.$require("bcdice/game_system/beginning_idol/accessories_table"),h.$require("bcdice/game_system/beginning_idol/with_abnormality"),h.$require("bcdice/game_system/beginning_idol/work_table"),h.$require("bcdice/game_system/beginning_idol/skill_table"),j=t,p=w=[D(t[0],"BCDice")].concat(j),M=[D(w[0],"GameSystem")].concat(p),x=e.$r(M),S=M,A=[B=y(M[0],x("Base"),"BeginningIdol")].concat(S),T=e.$r(A),b=[v=e.get_singleton_class(B)].concat(A),i=e.$r(b),v.$private(),k(v,"$translate_skill_table",function(n){return i("SkillTable").$from_i18n("BeginningIdol.skill_table",n,I(["rtt","rttn"],{rtt:"AT",rttn:["AT1","AT2","AT3","AT4","AT5","AT6"]}))},1),k(v,"$translate_tables",function(n){var s,r,f,g,z,H,N,Y,X,J,o=l,_=l,c=l,K=l;return o=i("CostumeTable").$from_i18n("BeginningIdol.tables.DT",n),_=i("CostumeTable").$from_i18n("BeginningIdol.tables.RC",n),c=i("CostumeTable").$from_i18n("BeginningIdol.tables.FC",n),s=i("ChainTable").$new(i("I18n").$t("BeginningIdol.ACB.name",I(["locale"],{locale:n})),"1D6",[[i("I18n").$t("BeginningIdol.ACB.items.challenge_girls",I(["locale"],{locale:n})),o.$brand_only()],[i("I18n").$t("BeginningIdol.ACB.items.challenge_girls",I(["locale"],{locale:n})),o.$brand_only()],[i("I18n").$t("BeginningIdol.ACB.items.road_to_prince",I(["locale"],{locale:n})),_.$brand_only()],[i("I18n").$t("BeginningIdol.ACB.items.road_to_prince",I(["locale"],{locale:n})),_.$brand_only()],[i("I18n").$t("BeginningIdol.ACB.items.fortune_stars",I(["locale"],{locale:n})),c.$brand_only()],[i("I18n").$t("BeginningIdol.ACB.items.fortune_stars",I(["locale"],{locale:n})),c.$brand_only()]]),r=i("BadStatusTable").$new(n),f=this.$translate_skill_table(n),g=a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.rare_skill_table",n),z=i("ItemTable").$new(n),H=i("ChainTable").$new(i("I18n").$t("BeginningIdol.TN.name",I(["locale"],{locale:n})),"1D6",L(i("I18n").$t("BeginningIdol.TN.items",I(["locale"],{locale:n})).$dup(),"tap",[],function(Q){return null==Q&&(Q=l),Q["$[]"](3).$push(f)},1)),N=i("ChainTable").$new(i("I18n").$t("BeginningIdol.CG.name",I(["locale"],{locale:n})),"1D6",L(i("I18n").$t("BeginningIdol.CG.items",I(["locale"],{locale:n})).$map(),"with_index",[],function(Q,Z){return null==Q&&(Q=l),null==Z&&(Z=l),C([3,4]["$include?"](Z))?[Q,z]:[Q]},2)),Y=i("ChainD66Table").$new(i("I18n").$t("BeginningIdol.GG.name",I(["locale"],{locale:n})),L(i("I18n").$t("BeginningIdol.GG.items",I(["locale"],{locale:n})),"to_h",[],function(Q,Z){return null==Q&&(Q=l),null==Z&&(Z=l),[Q,C(["23","24","25"]["$include?"](Q))?[Z,g]:R(Q,"56")?[Z,z]:[Z]]},2)),X=["22",[(K=i("I18n").$t("BeginningIdol.HA.items",I(["locale"],{locale:n})))["$[]"]("22"),i("SkillHometown").$new(f)].$flatten()],L(K,"[]=",d(X)),G(X.length,1),J=i("ChainD66Table").$new(i("I18n").$t("BeginningIdol.HA.name",I(["locale"],{locale:n})),K),I(["DT","RC","FC","ACB","TN","CG","GG","HA","CBT","RCB","HBT","RHB","RU","SIP","BU","HW","FL","MSE","ST","FST","BWT","LWT","TWT","CWT","SU","WI","NA","GA","BA","WT","VA","MU","DR","VI","SP","CHR","PAR","SW","AN","MOV","FA","BVT","LVT","TVT","CVT","BST","LST","TST","CST","BPT","LPT","TPT","CPT","BIT","LIT","TIT","CIT","CHO","SCH","WCH","NCH","GCH","PCH","LUR","SUR","WUR","NUR","GUR","BUR","ACE","ACT","MS","RE","SH","MO","SEA","SPA","LN","SGT","RS"],{DT:o,RC:_,FC:c,ACB:s,TN:H,CG:N,GG:Y,HA:J,CBT:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CBT",n),RCB:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.RCB",n),HBT:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.HBT",n),RHB:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.RHB",n),RU:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.RU",n),SIP:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.SIP",n),BU:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BU",n),HW:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.HW",n),FL:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.FL",n),MSE:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.MSE",n),ST:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.ST",n),FST:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.FST",n),BWT:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.BWT",n),LWT:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.LWT",n),TWT:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.TWT",n),CWT:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CWT",n),SU:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SU",n),WI:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.WI",n),NA:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.NA",n),GA:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.GA",n),BA:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.BA",n),WT:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.WT",n),VA:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.VA",n),MU:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.MU",n),DR:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.DR",n),VI:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.VI",n),SP:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SP",n),CHR:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CHR",n),PAR:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.PAR",n),SW:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SW",n),AN:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.AN",n),MOV:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.MOV",n),FA:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.FA",n),BVT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BVT",n),LVT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LVT",n),TVT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TVT",n),CVT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CVT",n),BST:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BST",n),LST:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LST",n),TST:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TST",n),CST:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CST",n),BPT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BPT",n),LPT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LPT",n),TPT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TPT",n),CPT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CPT",n),BIT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BIT",n),LIT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LIT",n),TIT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TIT",n),CIT:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CIT",n),CHO:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CHO",n),SCH:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.SCH",n),WCH:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.WCH",n),NCH:a(i("DiceTable"),"Table").$from_i18n("BeginningIdol.tables.NCH",n),GCH:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.GCH",n),PCH:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.PCH",n),LUR:i("D6TwiceTable").$from_i18n("BeginningIdol.tables.LUR",n),SUR:i("D6TwiceTable").$from_i18n("BeginningIdol.tables.SUR",n),WUR:i("D6TwiceTable").$from_i18n("BeginningIdol.tables.WUR",n),NUR:i("D6TwiceTable").$from_i18n("BeginningIdol.tables.NUR",n),GUR:i("D6TwiceTable").$from_i18n("BeginningIdol.tables.GUR",n),BUR:i("D6TwiceTable").$from_i18n("BeginningIdol.tables.BUR",n),ACE:a(i("DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.ACE",n),ACT:this.$translate_accessories_table(n),MS:i("MySkillNameTable").$new(n),RE:i("RandomEventTable").$new(n),SH:i("D66WithAbnormality").$from_i18n("BeginningIdol.tables.SH",r,n),MO:i("D66WithAbnormality").$from_i18n("BeginningIdol.tables.MO",r,n),SEA:i("D66WithAbnormality").$from_i18n("BeginningIdol.tables.SEA",r,n),SPA:i("D66WithAbnormality").$from_i18n("BeginningIdol.tables.SPA",r,n),LN:i("TableWithAbnormality").$from_i18n("BeginningIdol.tables.LN",r,n),SGT:i("SkillGetTable").$from_i18n("BeginningIdol.tables.SGT",f,n),RS:i("SkillGetTable").$from_i18n("BeginningIdol.tables.RS",f,n)})},1),P(A[0],"TABLES",B.$translate_tables("ja_jp")),P(A[0],"BAD_STATUS_TABLE",T("BadStatusTable").$new("ja_jp")),P(A[0],"LOCAL_WORK_TABLE",B.$translate_local_work_table("ja_jp")),P(A[0],"ITEM_TABLE",T("ItemTable").$new("ja_jp")),P(A[0],"SKILL_TABLE",B.$translate_skill_table("ja_jp")),B.$register_prefix(T("TABLES").$keys())},Opal.queue(function(e){var F,A,$,n,u,o,v,m,S,t=[],l=e.nil,a=e.$$$,D=e.module,y=e.klass,I=e.const_set,k=e.send2,L=e.find_super,C=e.def,R=e.eqeq,d=e.truthy,G=e.rb_le,P=e.rb_ge,V=e.alias,j=e.rb_gt,U=e.rb_lt,w=e.rb_plus,E=e.send,p=e.rb_minus,q=e.hash2,M=e.neqeq;return e.top.$require("bcdice/game_system/beginning_idol/table"),F=t,A=S=[D(t[0],"BCDice")].concat(F),v=[D(S[0],"GameSystem")].concat(A),m=e.$r(v),$=v,u=[n=y(v[0],m("Base"),"BeginningIdol")].concat($),o=e.$r(u),n.$$prototype.randomizer=l,I(u[0],"ID","BeginningIdol"),I(u[0],"NAME","\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb"),I(u[0],"SORT_KEY","\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b"),I(u[0],"HELP_MESSAGE","\u30fb\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3000[r]PDn[+m/-m](r\uff1a\u5834\u306b\u6b8b\u3063\u305f\u51fa\u76ee\u3000n\uff1a\u632f\u308b\u6570\u3000m\uff1a\u4fee\u6b63\u5024)\n\u30fb\u30ef\u30fc\u30eb\u30c9\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0\u4ed5\u4e8b\u8868\u3000BWT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LWT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\n\u3000TWT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CWT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\u3000LO[n]\uff1a\u5730\u65b9\u30a2\u30a4\u30c9\u30eb(n\uff1a\u30c1\u30e3\u30f3\u30b9)\n\u3000SU\uff1a\u60c5\u71b1\u306e\u590f\u3000WI\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\u3000NA\uff1a\u5927\u81ea\u7136\u3000GA\uff1a\u5973\u5b66\u5712\u3000BA\uff1a\u30a2\u30ab\u30c7\u30df\u30fc\n\u30fb\u4ed5\u4e8b\u8868\u3000WT\u3000VA\uff1a\u30d0\u30e9\u30a8\u30c6\u30a3\u3000MU\uff1a\u97f3\u697d\u95a2\u4fc2\u3000DR\uff1a\u30c9\u30e9\u30de\u95a2\u4fc2\n\u3000VI\uff1a\u30d3\u30b8\u30e5\u30a2\u30eb\u95a2\u4fc2\u3000SP\uff1a\u30b9\u30dd\u30fc\u30c4\u3000CHR\uff1a\u30af\u30ea\u30b9\u30de\u30b9\u3000PAR\uff1a\u30d1\u30fc\u30c8\u30ca\u30fc\u95a2\u4fc2\n\u3000SW\uff1a\u304a\u83d3\u5b50\u3000AN\uff1a\u52d5\u7269\u3000MOV\uff1a\u6620\u753b\u3000FA\uff1a\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\n\u30fb\u30e9\u30f3\u30c0\u30e0\u30a4\u30d9\u30f3\u30c8\u3000RE\n\u30fb\u30cf\u30d7\u30cb\u30f3\u30b0\u8868\u3000HA\n\u30fb\u7279\u6280\u30ea\u30b9\u30c8\u3000AT[n](n\uff1a\u5206\u91ceNo.)\n\u30fb\u30a2\u30a4\u30c9\u30eb\u30b9\u30ad\u30eb\u4fee\u5f97\u8868\u3000SGT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RS\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u5909\u8abf\u3000BT[n](n\uff1a\u767a\u751f\u6570)\n\u30fb\u30a2\u30a4\u30c6\u30e0\u3000IT[n](n\uff1a\u7372\u5f97\u6570)\n\u30fb\u30a2\u30af\u30bb\u30b5\u30ea\u30fc\u3000ACT\uff1a\u7a2e\u5225\u6c7a\u5b9a\u3000ACB\uff1a\u30d6\u30e9\u30f3\u30c9\u6c7a\u5b9a\u3000ACE\uff1a\u52b9\u679c\u8868\n\u30fb\u8863\u88c5\u3000DT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RC\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\u3000FC:\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u30b9\u30bf\u30fc\u30ba\n\u30fb\u7121\u8336\u3076\u308a\u8868\u3000LUR\uff1a\u5730\u65b9\u30a2\u30a4\u30c9\u30eb\u3000SUR\uff1a\u60c5\u71b1\u306e\u590f\u3000WUR\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\n\u3000NUR\uff1a\u5927\u81ea\u7136\u3000GUR\uff1a\u5973\u5b66\u5712\u3000BUR\uff1a\u30a2\u30ab\u30c7\u30df\u30fc\n\u30fb\u30bb\u30f3\u30bf\u30fc\u30eb\u30fc\u30eb\u3000HW\uff1a\u5411\u304b\u3044\u98a8\u30b7\u30fc\u30f3\u8868\u3000FL\uff1a\u99c6\u3051\u51fa\u3057\u30b7\u30fc\u30f3\u8868\u3000LN\uff1a\u5b64\u72ec\u8868\n\u3000\u30de\u30a4\u30b9\u30ad\u30eb\u3010MS\uff1a\u540d\u524d\u6c7a\u5b9a\u3000MSE\uff1a\u52b9\u679c\u8868\u3011\u3000\u6f14\u51fa\u8868\u3010ST\u3000FST\uff1a\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\u3011\n\u30fb\u5408\u5bbf\u30eb\u30fc\u30eb\u3000\u6563\u7b56\u8868\u3010SH\uff1a\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30e2\u30fc\u30eb\u3000MO\uff1a\u5c71\u3000SEA\uff1a\u6d77\u3000SPA\uff1a\u6e29\u6cc9\u8857\u3011\n\u3000TN\uff1a\u591c\u8a9e\u308a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\u3000\u6210\u9577\u8868\u3010CG\uff1a\u30b3\u30e2\u30f3\u3000GG\uff1a\u30b4\u30fc\u30eb\u30c9\u3011\n\u30fb\u30b5\u30d3\u8868\u3000CHO\u3000SCH\uff1a\u60c5\u71b1\u306e\u590f\u3000WCH\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\u3000NCH\uff1a\u5927\u81ea\u7136\n\u3000GCH\uff1a\u5973\u6027\u5411\u3051\u3000PCH\uff1a\u529b\u5f37\u3044\n\u30fb\u30ad\u30e3\u30e9\u7a7a\u767d\u8868\u3000CBT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RCB\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u8da3\u5473\u7a7a\u767d\u8868\u3000HBT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RHB\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u30de\u30b9\u30b3\u30c3\u30c8\u66b4\u8d70\u8868\u3000RU\n\u30fb\u30a2\u30a4\u30c9\u30eb\u71b1\u6e6f\u98a8\u5442\u3000nC\uff1a\u30d0\u30fc\u30b9\u30c8\u30bf\u30a4\u30e0(n\uff1a\u6e29\u5ea6)\u3000BU\uff1a\u30d0\u30fc\u30b9\u30c8\u8868\n\u30fb\u653b\u6483\u3000n[S]A[r][+m/-m](n\uff1a\u632f\u308b\u6570\u3000S\uff1a\u5931\u6557\u3057\u306a\u3044\u3000r\uff1a\u53d6\u308a\u9664\u304f\u51fa\u76ee\u3000m\uff1a\u4fee\u6b63\u5024)\n\u30fb\u304b\u3093\u305f\u3093\u30d1\u30fc\u30bd\u30f3\u8868\u3000SIP\n\u30fb\u4f1a\u5834\u8868\n\u3000BVT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LVT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TVT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CVT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u5834\u6240\u8868\n\u3000BST\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LST\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TST\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CST\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u7a2e\u5225\u6c7a\u5b9a\u8868\n\u3000BPT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LPT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TPT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CPT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u9053\u5177\u8868\n\u3000BIT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LIT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TIT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CIT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n[]\u5185\u306f\u7701\u7565\u53ef\u3000D66\u5165\u308c\u66ff\u3048\u3042\u308a\n"),n.$register_prefix(o("SKILL_TABLE").$prefixes(),"IT","BT","\\d{2}C","\\d+S?A","[1-7]*PD"),C(n,"$initialize",function c(s){var f=this;return delete c.$$p,k(f,L(f,"initialize",c,!1,!0),"initialize",[s],null),f.sort_add_dice=!0,f.d66_sort_type=a(o("D66SortType"),"ASC")},1),C(n,"$result_nd6",function(s,r,f,g,z){var H=this;return R(z,"?")||!R(g,">=")?l:d(G(r,2))?o("Result").$fumble(H.$translate("BeginningIdol.fumble")):d(P(r,12))?o("Result").$critical(H.$translate("BeginningIdol.special")):d(P(s,z))?o("Result").$success(H.$translate("success")):o("Result").$failure(H.$translate("failure"))},5),V(n,"check_2D6","check_nD6"),C(n,"$eval_game_system_specific_command",function(s){var f,g,z,H,N,Y,K,r=this;return d(f=d(g=d(z=d(H=d(N=d(Y=d(K=r.$roll_attack(s))?K:r.$roll_burst(s))?Y:r.$roll_performance(s))?N:a(r.$class(),"SKILL_TABLE").$roll_command(r.randomizer,s))?H:a(r.$class(),"ITEM_TABLE").$roll_command(r.randomizer,s))?z:a(r.$class(),"BAD_STATUS_TABLE").$roll_command(r.randomizer,s))?g:a(r.$class(),"LOCAL_WORK_TABLE").$roll_command(r.randomizer,s))?f:r.$roll_tables(s,a(r.$class(),"TABLES"))},1),n.$private(),C(n,"$roll_burst",function(s){var r=this,f=l,g=l,z=l,H=l,N=l,Y=l;return f=/^(\d{2})C$/.$match(s),!d(f)||(g=f["$[]"](1).$to_i(),d(U(g,45))||d(j(g,55)))?l:(z=d(G(g,49))?3:d(G(g,52))?4:d(G(g,54))?5:6,H=r.randomizer.$roll_barabara(z,6).$sort(),N=w(H.$sum(),g),Y=d(P(N,80))?r.$translate("BeginningIdol.burst.burst"):d(P(N,75))?r.$translate("BeginningIdol.burst.critical_success"):d(P(N,65))?r.$translate("BeginningIdol.burst.success"):r.$translate("failure"),r.$translate("BeginningIdol.burst.name")+" \uff1e "+g+"+["+H.$join(",")+"] \uff1e "+N+" \uff1e "+Y)},1),C(n,"$roll_attack",function(s){var r=this,f=l,g=l,z=l,H=l,N=l,Y=l,K=l,X=l,J=l,O=l;return f=/^(\d+)(S?)A([1-6]*)([+\-]\d+)?$/.$match(s),!d(f)||(g=f["$[]"](1).$to_i(),d(G(g,0)))?l:(z=f["$[]"](2)["$empty?"]()["$!"](),H=E(f["$[]"](3).$each_char(),"map",[],"to_i".$to_proc()),N=f["$[]"](4).$to_i(),Y=o("Format").$modifier(N),X=(K=r.randomizer.$roll_barabara(g,6).$sort()).$join(","),K=p(K,H),J=r.$translate("BeginningIdol.attack.name")+" \uff1e ["+X+"]"+Y+" \uff1e ",R(K.$count(),g)||d(K["$empty?"]())||(J=w(J,"["+K.$join(",")+"]"+Y+" \uff1e ")),d(z)||R(K.$count(),K.$uniq().$count())?(O=[w(K.$sum(),N.$to_i()),0].$max(),J=w(J,r.$format(r.$translate("BeginningIdol.attack.damage"),q(["total"],{total:O})))):J=w(J,r.$translate("failure")),J)},1),C(n,"$roll_performance",function(s){var r=this,f=l,g=l,z=l,H=l,N=l,Y=l,K=l,X=l,J=l;return f=/^([1-7]*)PD(\d+)([+\-]\d+)?$/.$match(s),!d(f)||(g=f["$[]"](2).$to_i(),d(G(g,0)))?l:(z=E(f["$[]"](1).$chars(),"map",[],"to_i".$to_proc()).$sort(),H=f["$[]"](3).$to_i(),N=r.randomizer.$roll_barabara(g,6).$sort(),Y=w(N,z).$sort(),K=r.$select_uniqs(Y),X=d(z["$empty?"]())?r.$translate("BeginningIdol.PD.paformance"):r.$translate("BeginningIdol.PD.symphony"),J=d(z["$empty?"]())?r.$result_performance(K,H,Y):r.$result_symphony(K,H),[X,r.$format_dice_list(N,z,H),J].$join(" \uff1e "))},1),C(n,"$select_uniqs",function(s){return E(E(E(s,"group_by",[],"itself".$to_proc()).$to_a(),"select",[],function(f,g){return null==f&&(f=l),null==g&&(g=l),g.$size()["$=="](1)},2),"map",[],function(f,g){return null==f&&(f=l),null==g&&(g=l),f},2).$sort()},1),C(n,"$format_dice_list",function(s,r,f){return d(r["$empty?"]())?"["+s.$join(",")+"]"+o("Format").$modifier(f):"["+s.$join(",")+"],["+r.$join(",")+"]"+o("Format").$modifier(f)},3),C(n,"$result_performance",function(s,r,f){var g=this;return d(s["$empty?"]())?g.$format(g.$translate("BeginningIdol.PD.miracle"),q(["value"],{value:w(r,10)})):R(s,[1,2,3,4,5,6])?g.$format(g.$translate("BeginningIdol.PD.perfect_miracle"),q(["value"],{value:w(r,30)})):M(s.$size(),f.$size())?"["+s.$join(",")+"]"+o("Format").$modifier(r)+" \uff1e "+w(s.$sum(),r):w(s.$sum(),r).$to_s()},3),C(n,"$result_symphony",function(s,r){var f=this,g=l;return d(s["$empty?"]())?f.$format(f.$translate("BeginningIdol.PD.miracle_synchro"),q(["value"],{value:w(r,15)})):R(s,[1,2,3,4,5,6])?(g=f.$format(f.$translate("BeginningIdol.PD.perfect_miracle"),q(["value"],{value:w(r,30)})),"["+s.$join(",")+"]"+o("Format").$modifier(r)+" \uff1e "+g):"["+s.$join(",")+"]"+o("Format").$modifier(r)+" \uff1e "+w(s.$sum(),r)},2)})}}]);