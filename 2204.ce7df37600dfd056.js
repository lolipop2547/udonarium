(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2204],{2204:(ue,oe,M)=>{M(9993),Opal.queue(function(l){var Q,ee,$e,t,D,$,r,a,m,R,y,w,te,q,B=[],e=l.nil,h=l.$$$,N=l.module,F=l.klass,H=l.const_set,V=l.send2,W=l.find_super,b=l.def,f=l.truthy,d=l.send,S=l.rb_plus,j=l.rb_divide,Y=l.eqeq,I=l.rb_le,G=l.to_a,C=l.rb_minus,X=l.rb_lt,A=l.rb_times,L=l.hash2,J=l.defs,k=l.to_ary;return Q=B,ee=q=[N(B[0],"BCDice")].concat(Q),w=[N(q[0],"GameSystem")].concat(ee),te=l.$r(w),$e=w,R=[m=F(w[0],te("Base"),"Dracurouge")].concat($e),y=l.$r(R),m.$$prototype.randomizer=e,H(R[0],"ID","Dracurouge"),H(R[0],"NAME","\u30c9\u30e9\u30af\u30eb\u30fc\u30b8\u30e5"),H(R[0],"SORT_KEY","\u3068\u3089\u304f\u308b\u3046\u3057\u3086"),H(R[0],"HELP_MESSAGE","\u30fb\u884c\u3044\u5224\u5b9a\uff08DRx+y\uff09\n\u3000x\uff1a\u632f\u308b\u30b5\u30a4\u30b3\u30ed\u306e\u6570\uff08\u7701\u7565\u6642\uff14\uff09\u3001y\uff1a\u6e07\u304d\u4fee\u6b63\uff08\u7701\u7565\u6642\uff10\uff09\n\u3000\u4f8b\uff09 DR\u3000DR6\u3000DR+1\u3000DR5+2\n\u30fb\u6297\u3044\u5224\u5b9a\uff08DRRx\uff09\n\u3000x\uff1a\u632f\u308b\u30b5\u30a4\u30b3\u30ed\u306e\u6570\n\u3000\u4f8b\uff09 DRR3\n\u30fb\u539f\u98a8\u666f\u8868\uff08ST\uff09\u3001\u53d9\u52f2\u8868\uff08CO\uff09\u3001\u53d9\u52f2\u5f8c\u8868\uff08CA\uff09\u3001\u9065\u304b\u904e\u53bb\u8868\uff08EP\uff09\n\u3000\u539f\u7f6a\u8868\uff08OS\uff09\u3001\u53d7\u96e3\u8868\uff08PN\uff09\u3001\u8fd1\u6cc1\u8868\uff08RS\uff09\u3001\u5e73\u548c\u306a\u904e\u53bb\u8868\uff08PP\uff09\n\u30fb\u5815\u843d\u8868\uff08CTx\uff09 x\uff1a\u6e07\u304d \uff08\u4f8b\uff09 CT3\n\u30fb\u5815\u843d\u306e\u5146\u3057\u8868\uff08CS\uff09\u3001\u62e1\u5f35\u30fb\u5815\u843d\u306e\u5146\u3057\u8868\uff08ECS\uff09\n\u30fb\u7d46\u5185\u5bb9\u6c7a\u5b9a\u8868\uff08BT\uff09\n\u30fb\u53cd\u5fdc\u8868\uff08RTxy\uff09x\uff1a\u8840\u7d71\u3001y\uff1a\u9053\u3000xy\u7701\u7565\u3067\u4e00\u62ec\u8868\u793a\n\u3000\u8840\u7d71\u3000D\uff1a\u30c9\u30e9\u30af\u3001R\uff1a\u30ed\u30fc\u30bc\u30f3\u30d6\u30eb\u30af\u3001H\uff1a\u30d8\u30eb\u30ba\u30ac\u30eb\u30c9\u3001M\uff1a\u30c0\u30b9\u30c8\u30cf\u30a4\u30e0\n\u3000\u3000\u3000\u3000A\uff1a\u30a2\u30f4\u30a1\u30ed\u30fc\u30e0\u3000N\uff1a\u30ce\u30b9\u30d5\u30a7\u30e9\u30b9\u3001G\uff1a\u30b2\u30a4\u30ba\u30f4\u30a1\u30eb\u30c8\u3001K\uff1a\u30ab\u30a4\u30f3\u30b7\u30eb\u30c8\n\u3000\u9053\u3000F\uff1a\u9818\u4e3b\u3001G\uff1a\u8fd1\u885b\u3001R\uff1a\u904d\u6b74\u3001W\uff1a\u8ce2\u8005\u3001J\uff1a\u72e9\u4eba\u3001N\uff1a\u591c\u7363\n\u3000\u3000\u3000E\uff1a\u5c06\u8ecd\u3001B\uff1a\u50e7\u6b63\u3001H\uff1a\u7a7a\u99c6\u3001K\uff1a\u8239\u9577\u3001L\uff1a\u5bf5\u7ae5\u3001V\uff1a\u4ef2\u7acb\u3001U\uff1a\u6280\u5e2b\u3001D\uff1a\u535a\u58eb\n\u3000\u3000\u3000S\uff1a\u661f\u8aad\u3001G2\uff1a\u5f8c\u898b\n\u3000\u4f8b\uff09RT\uff08\u4e00\u62ec\u8868\u793a\uff09\u3001RTDF\uff08\u30c9\u30e9\u30af\u306e\u9818\u4e3b\uff09\u3001RTAG2\uff08\u30a2\u30f4\u30a1\u30ed\u30fc\u30e0\u306e\u5f8c\u898b\u4eba\uff09\n\u30fb\u7570\u7aef\u306e\u53cd\u5fdc\u8868\uff08HRTxy\uff09x\uff1a\u8840\u7d71\u3001y\uff1a\u9053\u3000xy\u7701\u7565\u3067\u4e00\u62ec\u8868\u793a\n\u3000\u8840\u7d71\u3000L\uff1a\u7570\u7aef\u537f\u3001V\uff1a\u30f4\u30eb\u30b3\u30e9\u30af\u3001N\uff1a\u30ca\u30cf\u30c4\u30a7\u30fc\u30e9\u3001K\uff1a\u30ab\u30eb\u30f3\u30b7\u30e5\u30bf\u30a4\u30f3\n\u3000\u3000\u3000\u3000G\uff1a\u30b0\u30ea\u30de\u30eb\u30ad\u30f3\u3001S\uff1a\u30b9\u30c8\u30ea\u30ac\u3001M\uff1a\u30e1\u30ea\u30e5\u30b8\u30fc\u30cc\u3001F\uff1a\u30d5\u30a9\u30fc\u30f3\n\u3000\u3000\u3000\u3000H\uff1a\u30db\u30e0\u30f3\u30af\u30eb\u30b9\u3001E\uff1a\u30a8\u30ca\u30e1\u30eb\u30e0\u3001S2\uff1a\u30b5\u30f3\u30b0\u30a3\u30ca\u30ea\u30a8\u3001A\uff1a\u30a2\u30fc\u30eb\u30f4\n\u3000\u3000\u3000\u3000V2\uff1a\u30f4\u30a3\u30fc\u30f4\u30eb\u3001L2\uff1a\u30eb\u30fc\u30ac\u30eb\u30fc\u3001A2\uff1a\u30a2\u30eb\u30e9\u30a6\u30cd\u3001F2\uff1a\u30d5\u30ea\u30c3\u30ac\n\u3000\u9053\u3000W\uff1a\u91ce\u4f0f\u3001N\uff1a\u6d41\u6d6a\u3001S\uff1a\u5bc6\u4f7f\u3001H\uff1a\u9b54\u5973\u3001F\uff1a\u5263\u58eb\u3001X\uff1a\u691c\u4f53\n\u3000\u4f8b\uff09HRT\uff08\u4e00\u62ec\u8868\u793a\uff09\u3001HRTVW\uff08\u30f4\u30eb\u30b3\u30e9\u30af\u306e\u91ce\u4f0f\uff09\u3001HRTF2X\uff08\u30d5\u30ea\u30c3\u30ac\u306e\u691c\u4f53\uff09\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),b(m,"$initialize",function _(n){var D=this;return delete _.$$p,V(D,W(D,"initialize",_,!1,!0),"initialize",[n],null),D.d66_sort_type=h(y("D66SortType"),"NO_SORT")},1),b(m,"$eval_game_system_specific_command",function(n){var D,$,r,a,i,t=this;return f(D=f($=f(r=f(a=f(i=t.$roll_conduct_dice(n))?i:t.$roll_resist_dice(n))?a:t.$getReactionDiceCommandResult(n))?r:t.$getHeresyReactionDiceCommandResult(n))?$:t.$getCorruptionDiceCommandResult(n))?D:t.$roll_tables(n,h(t.$class(),"TABLES"))},1),m.$private(),b(m,"$roll_conduct_dice",function(n){var t,D=this,$=e,r=e,a=e,i=e,s=e,u=e,o=e;return $=/^DR(\d*[1-9])?(\+\d+)?$/.$match(n),f($)?(r=f(a=(t=$["$[]"](1))===e||null==t?e:d(t,"to_i",[]))?a:4,i=$["$[]"](2).$to_i(),s=D.randomizer.$roll_barabara(r,6).$sort(),u=D.$count_glory_dice(s),s=S(s,y("Array").$new(u,10)),o=D.$apply_thirsty_point(s,i),["("+n+")",r+"D6"+y("Format").$modifier(i),o,"[ "+s.$join(", ")+" ]"].$compact().$join(" \uff1e ")):e},1),b(m,"$count_glory_dice",function(n){var t,D;return t=n.$count(1),D=n.$count(6),S(j(t,2).$to_i(),j(D,2).$to_i())},1),b(m,"$apply_thirsty_point",function(n,t){var D=e,$=e,r=e;return Y(t,0)?e:(D=d(n,"rindex",[],function(i){return null==i&&(i=e),I(i,6)},1),$=d(n,"map",[],"to_s".$to_proc()),r=[D,S($["$[]"](D),"+"+t)],d($,"[]=",G(r)),C(r.length,1),r=[D,S(n["$[]"](D),t)],d(n,"[]=",G(r)),C(r.length,1),"[ "+$.$join(", ")+" ]")},2),b(m,"$roll_resist_dice",function(n){var D=e,$=e,r=e,a=e;return D=/^DRR(\d+)$/.$match(n),f(D)?($=D["$[]"](1).$to_i(),Y($,0)&&($=4),a=(r=this.randomizer.$roll_barabara($,6).$sort()).$sum(),"("+n+") \uff1e "+$+"D6 \uff1e [ "+r.$join(", ")+" ] \uff1e "+a):e},1),b(m,"$getReactionDiceCommandResult",function(n){var t=this,D=e,$=e,r=e,a=e,i=e;return f(n["$=~"](/^RT((\w\d*)(\w\d*))?/))?(D=y("Regexp").$last_match(2),$=y("Regexp").$last_match(3),r=t.$translate("Dracurouge.RT.name"),a=t.$translate("Dracurouge.RT.blood"),i=t.$translate("Dracurouge.RT.style"),t.$getReactionText(r,D,$,a,i)):e},1),b(m,"$getHeresyReactionDiceCommandResult",function(n){var t=this,D=e,$=e,r=e,a=e,i=e;return f(n["$=~"](/^HRT((\w\d*)(\w\d*))?/))?(D=y("Regexp").$last_match(2),$=y("Regexp").$last_match(3),r=t.$translate("Dracurouge.HRT.name"),a=t.$translate("Dracurouge.HRT.blood"),i=t.$translate("Dracurouge.HRT.style"),t.$getReactionText(r,D,$,a,i)):e},1),b(m,"$getReactionText",function(n,t,D,$,r){var i,s,u,o,g,a=this,c=e,T=e,x=e,v=e;if(!f(a.$checkTypeText(t,$))||!f(a.$checkTypeText(D,r)))return e;if(u=""+(i=a.randomizer.$roll_once(6))+(s=a.randomizer.$roll_once(6)),o=X(i,4),c=f(o)?$:r,T=f(o)?t:D,g=S(C(s,1),A(f(o)?C(i,1):C(i,4),6)),a.$debug("index",g),f(T["$nil?"]()))x=a.$getReactionTextFull(c,g);else{if(v=c["$[]"](T.$to_sym()),f(v["$nil?"]()))return e;x=a.$getReactionTex(v,g)}return n+"("+u+") \uff1e "+x},5),b(m,"$checkTypeText",function(n,t){return!!f(n["$nil?"]())||t.$keys()["$include?"](n.$to_sym())},2),b(m,"$getReactionTextFull",function(n,t){var $=e;return $=[],d(n,"each_value",[],function r(a){return null==a&&(a=e),$["$<<"]((null==r.$$s?this:r.$$s).$getReactionTex(a,t))},{$$arity:1,$$s:this}),$.$join("\uff0f")},2),b(m,"$getReactionTex",function(n,t){return n["$[]"]("name")+"\uff1a"+n["$[]"]("table")["$[]"](t)},2),b(m,"$getCorruptionDiceCommandResult",function(n){var t=this,D=e,$=e,r=e,a=e,i=e,s=e,u=e;return f(n["$=~"](/^CT(\d+)$/))?(D=y("Regexp").$last_match(1).$to_i(),$=t.$translate("Dracurouge.CT.name"),r=[[0,t.$translate("Dracurouge.CT.table.0")],[1,t.$translate("Dracurouge.CT.table.1")],[3,t.$translate("Dracurouge.CT.table.3")],[5,t.$translate("Dracurouge.CT.table.5")],[6,t.$translate("Dracurouge.CT.table.6")],[7,t.$translate("Dracurouge.CT.table.7")],[8,t.$translate("Dracurouge.CT.table.8")],[99,t.$translate("Dracurouge.CT.table.99")]],i=(a=t.randomizer.$roll_barabara(2,6)).$sum(),s=a.$join(","),u=C(i,D),t.$debug("index",u),"2D6["+s+"]-"+D+" \uff1e  "+$+"("+u+") \uff1e "+t.$get_table_by_number(u,r)):e},1),t=R,$=[D=F(R[0],null,"YearTable")].concat(t),r=l.$r($),(a=D.$$prototype).items=a.name=a.year_title=e,J(D,"$from_i18n",function(s,u,o){var g,T=e;return g=(T=r("I18n").$translate(s,L(["locale","raise"],{locale:u,raise:!0})))["$[]"]("items").$zip(o),this.$new(T["$[]"]("name"),T["$[]"]("year_title"),g)},3),b(D,"$initialize",function(s,u,o){var c=this;return c.name=s,c.year_title=u,c.items=o.$freeze()},3),b(D,"$roll",function(s){var u,o,T,g,x,v,P,E,c=this,p=e;return o=s.$roll_barabara(2,6),g=null==(u=k(o))[1]?e:u[1],x=S(A(C(T=null==u[0]?e:u[0],1),6),C(g,1)),o=c.items["$[]"](x),v=null==(u=k(o))[0]?e:u[0],p=d(P=null==u[1]?e:u[1],"gsub",[/\d+D6+/],function K(z){return null==z&&(z=e),(null==K.$$s?this:K.$$s).$roll_d6x(z,s)},{$$arity:1,$$s:c}),E=r("ArithmeticEvaluator").$eval(p.$gsub("\xd7","*")),c.name+"("+T+g+") \uff1e "+v+" \uff1e "+c.year_title+"\uff1a"+P+" \uff1e ("+p+") \uff1e "+c.year_title+"\uff1a"+E+"\u5e74"},1),D.$private(),b(D,"$roll_d6x",function(s,u){var o,c,T=e,g=e;return c=s.$split("D",2),o=k(c),g=null==o[1]?e:o[1],T=(T=null==o[0]?e:o[0]).$to_i(),d(r("Array"),"new",[T],function(){return d(u.$roll_barabara(g.$length(),6).$reverse().$map(),"with_index",[],function(p,E){return null==p&&(p=e),null==E&&(E=e),A(p,10["$**"](E).$to_i())},2).$sum()},0).$sum()},2),function(_,n){var t=[_].concat(n),D=l.$r(t);_.$private(),b(_,"$translate_tables",function(r){return L(["CO","CA","EP","OS","RS","PP","ST","PN","CS","ECS","BT"],{CO:D("YearTable").$from_i18n("Dracurouge.table.CO",r,["7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","7+1D6\xd71D6","10+1D6\xd71D6","7+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","18+1D6\xd71D6","10+2D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","30+1D6\xd71D6","14+1D6\xd71D6","7+1D6\xd71D6","14+1D6\xd71D6","10+2D6","14+1D6\xd71D6","14+1D6\xd71D6","7+4D6","14+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6"]),CA:D("YearTable").$from_i18n("Dracurouge.table.CA",r,["2D6\xd710","1D6\xd71D6","1D6\xd71D6","2D6\xd75","2D6\xd710","1D6\xd71D6","2D6\xd710","1D6\xd75","2D6\xd710","2D6\xd73","1D6\xd71D6","1D6\xd71D6","2D6\xd710","2D6\xd710","2D6\xd720","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd73","1D6\xd71D6","1D6\xd75","2D6\xd710","1D6\xd71D6","2D6\xd710","2D6","1D6\xd71D6","2D6","1D6\xd71D6","2D6\xd720","2D6\xd710","1D6\xd71D6","2D6\xd750","2D6\xd710","1D6\xd71D6","2D6\xd75","1D6\xd71D6"]),EP:D("YearTable").$from_i18n("Dracurouge.table.EP",r,["1D66+1300","1D666","1D666","1D666","1D66+1250","1D666","3D6\xd7100","2D6\xd7100","1D66+1210","1D666","2D6\xd7100","3D6\xd7100","1D66+1300","2D6\xd7100","1D6+1250","1D666","1D666","1D666","1D66+1250","2D6\xd7100","1D666","3D6\xd7100","2D6\xd7100","2D6\xd7100","1D6\xd7150","2D6\xd7100","1D66+1250","1D66+400","1212","2D6\xd7100","2D6\xd7100","1D66\xd710","3D6\xd7100","3D6\xd7100","1D66+1300","1D66+1833"]),OS:D("YearTable").$from_i18n("Dracurouge.table.OS",r,["7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","13+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","10+1D6\xd71D6","7+1D6\xd71D6","15+1D6\xd71D6","6+2D6","7+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","35+1D6\xd71D6","9+2D6","13+1D6\xd71D6","9+2D6","6+2D6","7+1D6\xd71D6","7+2D6","7+1D6\xd71D5","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6"]),RS:D("YearTable").$from_i18n("Dracurouge.table.RS",r,["2D6\xd710","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","3D6\xd730","3D6\xd730","2D6\xd710","2D6\xd710","2D6\xd710","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd71D6","3D6\xd730","3D6\xd720","1D6\xd71D6","3D6\xd730","3D6\xd720","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1D6\xd710","2D6\xd710","3D6\xd750","1D6\xd71D6","3D6\xd720","2D6\xd710","1D6\xd71D6","3D6\xd750"]),PP:D("YearTable").$from_i18n("Dracurouge.table.PP",r,["8+2D6","6+2D6","7+1D6\xd71D6","15+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","6+2D6","7+1D6\xd71D6","9+2D6","15+1D6\xd71D6","9+3D6","7+1D6\xd71D6","10+1D6\xd71D6","9+2D6","9+2D6","9+3D6","6+2D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","6+2D6","10+1D6\xd71D6","7+1D6\xd71D6","12+1D6\xd71D6","15+1D6\xd71D6","9+3D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","12+4D6"]),ST:h(D("DiceTable"),"D66Table").$from_i18n("Dracurouge.table.ST",r),PN:h(D("DiceTable"),"D66Table").$from_i18n("Dracurouge.table.PN",r),CS:h(D("DiceTable"),"Table").$from_i18n("Dracurouge.table.CS",r),ECS:h(D("DiceTable"),"D66Table").$from_i18n("Dracurouge.table.ECS",r),BT:h(D("DiceTable"),"Table").$from_i18n("Dracurouge.table.BT",r)})},1)}(l.get_singleton_class(m),R),H(R[0],"TABLES",m.$translate_tables("ja_jp")),m.$register_prefix("DR","RT","HRT","CT",y("TABLES").$keys())})}}]);