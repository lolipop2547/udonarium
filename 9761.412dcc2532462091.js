(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9761],{9761:(ie,ae,se)=>{se(9993),Opal.modules["bcdice/arithmetic_evaluator"]=function(r){var J,Q,B,F,W,P,k,b,V=[],o=r.nil,n=r.$$$,X=r.module,j=r.hash2,w=r.truthy,g=r.def;return J=V,Q=b=[X(V[0],"BCDice")].concat(J),k=[P=X(b[0],"ArithmeticEvaluator")].concat(Q),F=[B=r.get_singleton_class(P)].concat(k),W=r.$r(F),g(B,"$eval",function(U,i){var M,q=o;if(null==i)i=j([],{});else if(!i.$$is_hash)throw r.ArgumentError.$new("expected kwargs");return null==(M=i.$$smap.round_type)&&(M=n(W("RoundType"),"FLOOR")),w(U)&&w(q=W("Arithmetic").$eval(U,M))?q:0},-2)},Opal.modules["bcdice/dice_table/range_table"]=function(r){var k,W,q,R,S,E,K,U,N,V=[],o=r.nil,n=r.module,X=r.klass,j=r.const_set,w=r.send,g=r.truthy,L=r.def,J=r.to_a,D=r.rb_minus,b=r.eqeqeq,H=r.rb_times,Q=r.rb_plus;return k=V,W=N=[n(V[0],"BCDice")].concat(k),q=U=[n(N[0],"DiceTable")].concat(W),S=[R=X(U[0],null,"RangeTable")].concat(q),E=r.$r(S),(K=R.$$prototype).name=K.items=K.num_of_dice=K.num_of_sides=K.formatter=o,j(S[0],"RollResult",w(E("Struct"),"new",["sum","values","content","formatted"],function T(){return(null==T.$$s?this:T.$$s).$alias_method("to_s","formatted")},{$$arity:0,$$s:R})),j(S[0],"Item",E("Struct").$new("range","content")),j(S[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),j(S[0],"DEFAULT_FORMATTER",w(R,"lambda",[],function($,a){return null==$&&($=o),null==a&&(a=o),$.$name()+"("+a.$sum()+") \uff1e "+a.$content()},2)),R.$attr_reader("name"),R.$attr_reader("num_of_dice"),R.$attr_reader("num_of_sides"),L(R,"$initialize",function T($,a,c){var l,m=T.$$p||o,v=this,_=o;return delete T.$$p,v.name=$.$freeze(),v.formatter=g(l=m)?l:E("DEFAULT_FORMATTER"),_=E("DICE_ROLL_METHOD_RE").$match(a),g(_)||v.$raise(E("ArgumentError"),v.name+": invalid dice roll method: "+a),v.num_of_dice=_["$[]"](1).$to_i(),v.num_of_sides=_["$[]"](2).$to_i(),v.$store(c)},3),L(R,"$fetch",function($){var c,a=this;return c=w(a.items,"find",[],function(v){return null==v&&(v=o),v.$range()["$include?"]($)},1),g(c)||a.$raise(E("RangeError"),a.name+": value is out of range: "+$),c},1),L(R,"$roll",function($){var m,v,l,a=this,c=o;return m=(c=$.$roll_barabara(a.num_of_dice,a.num_of_sides)).$sum(),v=E("RollResult").$new(m,c,a.$fetch(m).$content()),l=[a.formatter["$[]"](a,v)],w(v,"formatted=",J(l)),D(l.length,1),v},1),R.$private(),L(R,"$store",function($){var c,m,a=this;return c=w($,"map",[],function v(l,_){return null==l&&(l=o),null==_&&(_=o),[(null==v.$$s?this:v.$$s).$coerce_to_int_range(l),_]},{$$arity:2,$$s:a}),m=w(c,"sort_by",[],function(l,_){return null==l&&(l=o),null==_&&(_=o),l.$min()},2),a.$assert_min_sum_is_covered(m),a.$assert_max_sum_is_covered(m),a.$assert_no_gap_or_overlap_in_ranges(m),a.items=w(m,"map",[],function(l,_){return null==l&&(l=o),null==_&&(_=o),E("Item").$new(l,_.$freeze()).$freeze()},2).$freeze(),a},1),L(R,"$coerce_to_int_range",function($){var c;return b(E("Integer"),c=$)?E("Range").$new($,$):b(E("Range"),c)&&g($.$begin()["$is_a?"](E("Integer")))&&g($.$end()["$is_a?"](E("Integer")))?$:this.$raise(E("TypeError"),this.name+": "+$+" ("+$.$class()+") must be an Integer or a Range with Integers ")},1),L(R,"$assert_min_sum_is_covered",function($){var c,a=this,m=o;return c=a.num_of_dice,m=$.$first()["$[]"](0),g(m["$include?"](c))||a.$raise(E("RangeError"),a.name+": min value ("+c+") is not covered: "+m),a},1),L(R,"$assert_max_sum_is_covered",function($){var c,a=this,m=o;return c=H(a.num_of_dice,a.num_of_sides),m=$.$last()["$[]"](0),g(m["$include?"](c))||a.$raise(E("RangeError"),a.name+": max value ("+c+") is not covered: "+m),a},1),L(R,"$assert_no_gap_or_overlap_in_ranges",function($){return w($,"each_cons",[2],function c(m,v){var ee,z,l=null==c.$$s?this:c.$$s,_=o,G=o;return null==l.name&&(l.name=o),null==m&&(m=o),null==v&&(v=o),_=m["$[]"](0),G=v["$[]"](0),ee=_.$max(),z=Q(ee,1),g(G["$include?"](ee))&&l.$raise(E("RangeError"),l.name+": Range overlap: "+_+" and "+G),g(G["$include?"](z))?o:l.$raise(E("RangeError"),l.name+": Range gap: "+_+" and "+G)},{$$arity:2,$$s:this}),this},1)},Opal.modules["bcdice/game_system/DoubleCross"]=function(r){var q,K,c,m,v,u,e,x,t,d,l,_,G,$,a,S,V=r.top,o=[],n=r.nil,X=r.$$$,j=r.module,w=r.klass,g=r.const_set,L=r.send2,J=r.find_super,D=r.def,b=r.truthy,H=r.rb_lt,Q=r.rb_gt,P=r.rb_plus,k=r.send,B=r.to_a,N=r.rb_minus,F=r.rb_ge,W=r.eqeq,s=r.hash2,U=r.to_ary,i=r.range;return V.$require("bcdice/arithmetic_evaluator"),V.$require("bcdice/dice_table/range_table"),q=o,K=S=[j(o[0],"BCDice")].concat(q),$=[j(S[0],"GameSystem")].concat(K),a=r.$r($),c=$[0],m=a("Base"),v=$,_=[l=w(c,m,"DoubleCross")].concat(v),G=r.$r(_),l.$$prototype.randomizer=n,g(_[0],"ID","DoubleCross"),g(_[0],"NAME","\u30c0\u30d6\u30eb\u30af\u30ed\u30b92nd,3rd"),g(_[0],"SORT_KEY","\u305f\u3075\u308b\u304f\u308d\u30592"),g(_[0],"HELP_MESSAGE",'\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\uff08xDX+y@c or xDXc+y\uff09\n\u3000"(\u500b\u6570)DX(\u4fee\u6b63)@(\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024)" \u3082\u3057\u304f\u306f "(\u500b\u6570)DX(\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024)(\u4fee\u6b63)" \u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3000\u4fee\u6b63\u5024\u3082\u4ed8\u3051\u3089\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff0910dx\u3000\u300010dx+5@8\uff08OD tool\u5f0f)\u3000\u30005DX7+7-3\uff08\u75be\u98a8\u6012\u6fe4\u5f0f\uff09\n\n\u30fb\u5404\u7a2e\u8868\n\u3000\u30fb\u611f\u60c5\u8868\uff08ET\uff09\n\u3000\u3000\u30dd\u30b8\u30c6\u30a3\u30d6\u3068\u30cd\u30ac\u30c6\u30a3\u30d6\u306e\u4e21\u65b9\u3092\u632f\u3063\u3066\u3001\u8868\u306b\u306a\u3063\u3066\u3044\u308b\u5074\u306b\u25cb\u3092\u4ed8\u3051\u3066\u8868\u793a\u3057\u307e\u3059\u3002\n\u3000\u3000\u3082\u3061\u308d\u3093\u4efb\u610f\u3067\u9078\u3076\u90e8\u5206\u306f\u5909\u66f4\u3057\u3066\u69cb\u3044\u307e\u305b\u3093\u3002\n\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n'),D(l,"$initialize",function z(p){var e=this;return delete z.$$p,L(e,J(e,"initialize",z,!1,!0),"initialize",[p],null),e.sides_implicit_d=10},1),l.$register_prefix("\\d+DX","ET"),u=_,x=[e=w(_[0],null,"DX")].concat(u),t=r.$r(x),(d=e.$$prototype).modifier=d.critical_value=d.expression=d.num=d.modifier_str=d.target_value=n,e.$include(t("Translate")),D(e,"$initialize",function(I,A,C,f){var y=this;return y.num=I,y.critical_value=A,y.modifier=C,y.target_value=f,y.modifier_str=t("Format").$modifier(y.modifier),y.expression=y.$node_expression(),y.locale="ja_jp"},4),D(e,"$execute",function(I){var C=this,f=n,y=n,Y=n,te=n,O=n,Z=n;if(b(H(C.critical_value,2)))return t("Result").$new("("+C.expression+") \uff1e "+C.$translate("DoubleCross.DX.invalid_critical"));if(b(H(C.num,1)))return t("Result").$failure("("+C.expression+") \uff1e "+C.$translate("DoubleCross.DX.auto_failure"));for(f=[],y=C.num,Y=0;b(b(te=Q(y,0))?H(Y,X(X(t("CommonCommand"),"RerollDice"),"REROLL_LIMIT")):te);)O=I.$roll_barabara(y,10),Z=t("ValueGroup").$new(O,C.critical_value),f.$push(Z),y=Z.$num_of_critical_occurrences(),Y=P(Y,1);return C.$result(f)},1),e.$private(),D(e,"$node_expression",function(){var A,I=this;return A=I.num+"DX"+I.critical_value+I.modifier_str,b(I.target_value)?A+">="+I.target_value:A},0),D(e,"$result",function(I){var y,te,A=this,C=n,f=n,Y=n,O=n,Z=n,re=n,ne=n;return C=t("Result").$new(),f=[I["$[]"](0).$values()["$all?"](1)],k(C,"fumble=",B(f)),N(f.length,1),y=k(I,"map",[],"max".$to_proc()).$sum(),Y=b(C["$fumble?"]())?0:P(y,A.modifier),te=b(C["$fumble?"]())?Y+" ("+A.$translate("fumble")+")":Y.$to_s(),f=[Q(I.$length(),1)],k(C,"critical=",B(f)),N(f.length,1),O=["("+A.expression+")",""+I.$join("+")+A.modifier_str,te],b(A.target_value)&&(Z=b(re=C["$fumble?"]()["$!"]())?F(Y,A.target_value):re,b(Z)?(k(C,"success=",B(f=[!0])),N(f.length,1)):(k(C,"failure=",B(f=[!0])),N(f.length,1)),ne=A.$translate(b(Z)?"success":"failure"),O.$push(ne)),f=[O.$join(" \uff1e ")],k(C,"text=",B(f)),N(f.length,1),C},1),function(z,p){var u=w(z,null,"ValueGroup"),e=u.$$prototype;e.values=e.critical_value=n,u.$attr_reader("values"),u.$attr_reader("critical_value"),D(u,"$initialize",function(t,d){return this.values=t.$sort(),this.critical_value=d},2),D(u,"$to_s",function(){return this.$max()+"["+this.values.$join(",")+"]"},0),D(u,"$max",function(){var t=this;return b(k(t.values,"any?",[],function d(h){return null==h&&(h=n),(null==d.$$s?this:d.$$s)["$critical?"](h)},{$$arity:1,$$s:t}))?10:t.values.$max()},0),D(u,"$num_of_critical_occurrences",function(){return k(this.values,"count",[],function d(h){return null==h&&(h=n),(null==d.$$s?this:d.$$s)["$critical?"](h)},{$$arity:1,$$s:this})},0),u.$private(),D(u,"$critical?",function(t){return F(t,this.critical_value)},1)}(_[0]),D(l,"$eval_game_system_specific_command",function(p){var u=this,e=n;return b(e=u.$parse_dx(p))?e.$execute(u.randomizer):W(p,"ET")?u.$roll_emotion_table():n},1),l.$private(),D(l,"$parse_dx",function(p){var e;return b(e=this.$parse_dx_od(p))?e:this.$parse_dx_shippu_doto(p)},1),D(l,"$parse_dx_od",function(p){var x=n,t=n,d=n,h=n;return x=X(G("Command"),"Parser").$new(/\d+DX/,s(["round_type"],{round_type:this.$round_type()})).$enable_critical().$restrict_cmp_op_to(n,">=").$parse(p),b(x)?(t=x.$command().$to_i(),d=b(h=x.$critical())?h:10,X(this.$class(),"DX").$new(t,d,x.$modify_number(),x.$target_number())):n},1),D(l,"$parse_dx_shippu_doto",function(p){var u,e,d=n,h=n,I=n,A=n;return d=X(G("Command"),"Parser").$new(/\d+DX\d*/,s(["round_type"],{round_type:this.$round_type()})).$restrict_cmp_op_to(n,">=").$parse(p),b(d)?(e=k(d.$command().$split("DX",2),"map",[],function(f){var y;return null==f&&(f=n),(y=f)===n||null==y?n:k(y,"to_i",[])},1),h=null==(u=U(e))[0]?n:u[0],I=b(A=I=null==u[1]?n:u[1])?A:10,X(this.$class(),"DX").$new(h,I,d.$modify_number(),d.$target_number())):n},1),D(l,"$roll_emotion_table",function(){var x,p=this,u=n,e=n,t=n,h=n;return u=X(p.$class(),"POSITIVE_EMOTION_TABLE").$roll(p.randomizer),e=X(p.$class(),"NEGATIVE_EMOTION_TABLE").$roll(p.randomizer),x=p.randomizer.$roll_once(2)["$=="](1),t=b(x)?["\u25cb"+u.$content(),e.$content()]:[u.$content(),"\u25cb"+e.$content()],h=[p.$translate("DoubleCross.ET.name")+"("+u.$sum()+"-"+e.$sum()+")",t.$join(" - ")],G("Result").$new(h.$join(" \uff1e "))},0),function(z,p){var u=[z].concat(p),e=r.$r(u);z.$private(),D(z,"$positive_emotion_table",function(t){return X(e("DiceTable"),"RangeTable").$new(e("I18n").$translate("DoubleCross.ET.positive.name",s(["locale"],{locale:t})),"1D100",[[i(1,5,!1),e("I18n").$translate("DoubleCross.ET.positive.items.1_5",s(["locale"],{locale:t}))],[i(6,10,!1),e("I18n").$translate("DoubleCross.ET.positive.items.6_10",s(["locale"],{locale:t}))],[i(11,15,!1),e("I18n").$translate("DoubleCross.ET.positive.items.11_15",s(["locale"],{locale:t}))],[i(16,20,!1),e("I18n").$translate("DoubleCross.ET.positive.items.16_20",s(["locale"],{locale:t}))],[i(21,25,!1),e("I18n").$translate("DoubleCross.ET.positive.items.21_25",s(["locale"],{locale:t}))],[i(26,30,!1),e("I18n").$translate("DoubleCross.ET.positive.items.26_30",s(["locale"],{locale:t}))],[i(31,35,!1),e("I18n").$translate("DoubleCross.ET.positive.items.31_35",s(["locale"],{locale:t}))],[i(36,40,!1),e("I18n").$translate("DoubleCross.ET.positive.items.36_40",s(["locale"],{locale:t}))],[i(41,45,!1),e("I18n").$translate("DoubleCross.ET.positive.items.41_45",s(["locale"],{locale:t}))],[i(46,50,!1),e("I18n").$translate("DoubleCross.ET.positive.items.46_50",s(["locale"],{locale:t}))],[i(51,55,!1),e("I18n").$translate("DoubleCross.ET.positive.items.51_55",s(["locale"],{locale:t}))],[i(56,60,!1),e("I18n").$translate("DoubleCross.ET.positive.items.56_60",s(["locale"],{locale:t}))],[i(61,65,!1),e("I18n").$translate("DoubleCross.ET.positive.items.61_65",s(["locale"],{locale:t}))],[i(66,70,!1),e("I18n").$translate("DoubleCross.ET.positive.items.66_70",s(["locale"],{locale:t}))],[i(71,75,!1),e("I18n").$translate("DoubleCross.ET.positive.items.71_75",s(["locale"],{locale:t}))],[i(76,80,!1),e("I18n").$translate("DoubleCross.ET.positive.items.76_80",s(["locale"],{locale:t}))],[i(81,85,!1),e("I18n").$translate("DoubleCross.ET.positive.items.81_85",s(["locale"],{locale:t}))],[i(86,90,!1),e("I18n").$translate("DoubleCross.ET.positive.items.86_90",s(["locale"],{locale:t}))],[i(91,95,!1),e("I18n").$translate("DoubleCross.ET.positive.items.91_95",s(["locale"],{locale:t}))],[i(96,100,!1),e("I18n").$translate("DoubleCross.ET.positive.items.96_100",s(["locale"],{locale:t}))]])},1),D(z,"$negative_emotion_table",function(t){return X(e("DiceTable"),"RangeTable").$new(e("I18n").$translate("DoubleCross.ET.negative.name",s(["locale"],{locale:t})),"1D100",[[i(1,5,!1),e("I18n").$translate("DoubleCross.ET.negative.items.1_5",s(["locale"],{locale:t}))],[i(6,10,!1),e("I18n").$translate("DoubleCross.ET.negative.items.6_10",s(["locale"],{locale:t}))],[i(11,15,!1),e("I18n").$translate("DoubleCross.ET.negative.items.11_15",s(["locale"],{locale:t}))],[i(16,20,!1),e("I18n").$translate("DoubleCross.ET.negative.items.16_20",s(["locale"],{locale:t}))],[i(21,25,!1),e("I18n").$translate("DoubleCross.ET.negative.items.21_25",s(["locale"],{locale:t}))],[i(26,30,!1),e("I18n").$translate("DoubleCross.ET.negative.items.26_30",s(["locale"],{locale:t}))],[i(31,35,!1),e("I18n").$translate("DoubleCross.ET.negative.items.31_35",s(["locale"],{locale:t}))],[i(36,40,!1),e("I18n").$translate("DoubleCross.ET.negative.items.36_40",s(["locale"],{locale:t}))],[i(41,45,!1),e("I18n").$translate("DoubleCross.ET.negative.items.41_45",s(["locale"],{locale:t}))],[i(46,50,!1),e("I18n").$translate("DoubleCross.ET.negative.items.46_50",s(["locale"],{locale:t}))],[i(51,55,!1),e("I18n").$translate("DoubleCross.ET.negative.items.51_55",s(["locale"],{locale:t}))],[i(56,60,!1),e("I18n").$translate("DoubleCross.ET.negative.items.56_60",s(["locale"],{locale:t}))],[i(61,65,!1),e("I18n").$translate("DoubleCross.ET.negative.items.61_65",s(["locale"],{locale:t}))],[i(66,70,!1),e("I18n").$translate("DoubleCross.ET.negative.items.66_70",s(["locale"],{locale:t}))],[i(71,75,!1),e("I18n").$translate("DoubleCross.ET.negative.items.71_75",s(["locale"],{locale:t}))],[i(76,80,!1),e("I18n").$translate("DoubleCross.ET.negative.items.76_80",s(["locale"],{locale:t}))],[i(81,85,!1),e("I18n").$translate("DoubleCross.ET.negative.items.81_85",s(["locale"],{locale:t}))],[i(86,90,!1),e("I18n").$translate("DoubleCross.ET.negative.items.86_90",s(["locale"],{locale:t}))],[i(91,95,!1),e("I18n").$translate("DoubleCross.ET.negative.items.91_95",s(["locale"],{locale:t}))],[i(96,100,!1),e("I18n").$translate("DoubleCross.ET.negative.items.96_100",s(["locale"],{locale:t}))]]).$freeze()},1)}(r.get_singleton_class(l),_),g(_[0],"POSITIVE_EMOTION_TABLE",l.$positive_emotion_table("ja_jp").$freeze()),g(_[0],"NEGATIVE_EMOTION_TABLE",l.$negative_emotion_table("ja_jp").$freeze())},Opal.queue(function(r){var H,B,i,M,q,R,F,W,P,o=[],X=r.$$$,j=r.module,w=r.klass,g=r.const_set,L=r.send2,J=r.find_super,D=r.def;return r.top.$require("bcdice/game_system/DoubleCross"),H=o,B=P=[j(o[0],"BCDice")].concat(H),F=[j(P[0],"GameSystem")].concat(B),W=r.$r(F),i=F,q=[M=w(F[0],W("DoubleCross"),"DoubleCross_Korean")].concat(i),R=r.$r(q),g(q[0],"ID","DoubleCross:Korean"),g(q[0],"NAME","\ub354\ube14\ud06c\ub85c\uc2a42nd,3rd"),g(q[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub354\ube14\ud06c\ub85c\uc2a4"),g(q[0],"HELP_MESSAGE",'\u30fb\ud310\uc815 \ucee4\ub9e8\ub4dc\uff08xDX+y@c or xDXc+y\uff09\n\u3000"(\uac1c\uc218)DX(\uc218\uc815)@(\ud06c\ub9ac\ud2f0\uceec\uce58)" \ud639\uc740 "(\uac1c\uc218)DX(\ud06c\ub9ac\ud2f0\uceec\uce58)(\uc218\uc815)" \uc73c\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\u3000\uc218\uc815\uce58\ub3c4 \ubd99\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\u3000\uc608\uff0910dx\u3000\u300010dx+5@8\uff08OD tool\uc2dd)\u3000\u30005DX7+7-3\uff08\uc9c8\ud48d\ub178\ub3c4\uc2dd\uff09\n\u30fb\uac01\uc885\ud45c\n\u3000\u30fb\uac10\uc815\ud45c\uff08ET\uff09\n\u3000\u3000\ud3ec\uc9c0\ud2f0\ube0c\uc640 \ub124\uac70\ud2f0\ube0c \uc591\ucabd\uc744 \uad74\ub824, \uac89\uc73c\ub85c \ub098\ud0c0\ub294 \ucabd\uc5d0 O\ub97c \ubd99\uc5ec \ud45c\uc2dc\ud569\ub2c8\ub2e4.\n\u3000\u3000\ubb3c\ub860 \uc784\uc758\ub85c \uc815\ud558\ub294 \ubd80\ubd84\uc744 \ubcc0\uacbd\ud574\ub3c4 \uad1c\ucc2e\uc2b5\ub2c8\ub2e4.\n\u30fbD66\ub2e4\uc774\uc2a4 \uc788\uc74c\n'),M.$register_prefix_from_super_class(),D(M,"$initialize",function S(E){var T=this;return delete S.$$p,L(T,J(T,"initialize",S,!1,!0),"initialize",[E],null),T.locale="ko_kr"},1),D(w(q[0],X(R("DoubleCross"),"DX"),"DX"),"$initialize",function T($,a,c,m){var l=this;return delete T.$$p,L(l,J(l,"initialize",T,!1,!0),"initialize",[$,a,c,m],null),l.locale="ko_kr"},4),g(q[0],"POSITIVE_EMOTION_TABLE",M.$positive_emotion_table("ko_kr").$freeze()),g(q[0],"NEGATIVE_EMOTION_TABLE",M.$negative_emotion_table("ko_kr").$freeze())})}}]);