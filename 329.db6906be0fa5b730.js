(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[329],{329:(ce,fe,U)=>{U(9993),Opal.queue(function(o){var ie,re,ae,c,A,v,K,w,se,M,I=[],e=o.nil,P=o.module,V=o.klass,q=o.const_set,W=o.send2,X=o.find_super,E=o.range,g=o.def,m=o.eqeqeq,_=o.truthy,B=o.rb_le,b=o.rb_plus,L=o.eqeq,H=o.send,Z=o.rb_times,x=o.rb_ge,T=o.rb_divide,F=o.rb_lt,O=o.rb_gt,ee=o.hash2,S=o.to_ary,p=o.to_a,k=o.rb_minus,te=o.not;return ie=I,re=M=[P(I[0],"BCDice")].concat(ie),w=[P(M[0],"GameSystem")].concat(re),se=o.$r(w),ae=w,A=[c=V(w[0],se("Base"),"Cthulhu7th_Korean")].concat(ae),v=o.$r(A),(K=c.$$prototype).bonus_dice_range=K.randomizer=e,q(A[0],"ID","Cthulhu7th:Korean"),q(A[0],"NAME","\ud06c\ud234\ub8e8\uc758 \ubd80\ub984 7\ud310"),q(A[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ud06c\ud234\ub8e8\uc758 \ubd80\ub984 7\ud310"),q(A[0],"HELP_MESSAGE","\u30fb\ud310\uc815\u3000CC(x)<=\uff08\ubaa9\ud45c\uce58\uff09\n\u3000x\uff1a\ubcf4\ub108\uc2a4, \ud328\ub110\ud2f0 \uc8fc\uc0ac\uc704\uff1aBonus/Penalty Dice (2~-2). \uc0dd\ub7b5 \uac00\ub2a5.\n\u3000\ub300\uc2e4\ud328\uff1aFumble\uff0f\uc2e4\ud328\uff1aFailure\uff0f\ubcf4\ud1b5 \uc131\uacf5\uff1aRegular success\uff0f\n\u3000\uc5b4\ub824\uc6b4 \uc131\uacf5\uff1aHard success\uff0f\ub300\ub2e8\ud55c \uc131\uacf5\uff1aExtreme success\uff0f\n\u3000\ub300\uc131\uacf5\uff1aCritical success\u3000\uc744 \uc790\ub3d9\ud310\uc815.\n\uc608\uff09CC<=30\u3000CC(2)<=50\u3000CC(-1)<=75\n\n\u30fb\uc870\ud569 \ud310\uc815\u3000(CBR(x,y))\n\u3000\ubaa9\ud45c\uce58 x \uc640 y \ub85c \ub3d9\uc2dc\uc5d0 \uff05\ud310\uc815\uc744 \ud55c\ub2e4.\n\u3000\uc608\uff09CBR(50,20)\n\n\u30fb\uc5f0\uc0ac(Full Auto)\ud310\uc815\u3000FAR(w,x,y,z)\n\u3000w\uff1a\ud0c4\uc218(1~100), x\uff1a\uae30\ub2a5 \uc218\uce58(1~100), y\uff1a\uace0\uc7a5 \ub118\ubc84\n\u3000z\uff1a\ubcf4\ub108\uc2a4, \ud328\ub110\ud2f0 \uc8fc\uc0ac\uc704(-2~2). \uc0dd\ub7b5 \uac00\ub2a5.\n\u3000\uba85\uc911\uc218\uc640 \uad00\ud1b5\uc218, \uc794\ud0c4\uc218\ub9cc\uc744 \uacc4\uc0b0. \ub370\ubbf8\uc9c0\ub294 \uacc4\uc0b0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\n\uc608\uff09FAR(25,70,98)\u3000FAR(50,80,98,-1)\n"),c.$register_prefix("CC","CBR","FAR"),g(c,"$initialize",function f(l){var i=this;return delete f.$$p,W(i,X(i,"initialize",f,!1,!0),"initialize",[l],null),i.bonus_dice_range=E(-2,2,!1)},1),g(c,"$eval_game_system_specific_command",function(l){var i,t=this;return m(/CC/i,i=l)?t.$getCheckResult(l):m(/CBR/i,i)?t.$getCombineRoll(l):m(/FAR/i,i)?t.$getFullAutoResult(l):e},1),g(c,"$getCheckResult",function(l){var i,n,t=this,$=e,s=e,a=e,u=e,r=e;return _(/^CC([-\d]+)?<=(\d+)/i["$=~"](l)),i=v("Regexp").$last_match(1).$to_i(),n=v("Regexp").$last_match(2).$to_i(),_(B(n,0))?"\uc5d0\ub7ec. \ubaa9\ud45c\uce58\ub294 1 \uc774\uc0c1\uc785\ub2c8\ub2e4.":_(t.bonus_dice_range["$include?"](i))?($=b($="","(1D100<="+n+")"),$=b($," \ubcf4\ub108\uc2a4, \ud328\ub110\ud2f0 \uc8fc\uc0ac\uc704["+i+"]"),s=t.$rollPercentD10(),a=t.$getTotalLists(i,s),u=t.$getTotal(a,i),r=t.$getCheckResultText(u,n),$=b($," \uff1e "+a.$join(", ")+" \uff1e "+u+" \uff1e "+r)):"\uc5d0\ub7ec. \ubcf4\ub108\uc2a4, \ud328\ub110\ud2f0 \uc8fc\uc0ac\uc704\uc758 \uc218\uce58\ub294 "+t.bonus_dice_range.$min()+"~"+t.bonus_dice_range.$max()+"\uc785\ub2c8\ub2e4."},1),g(c,"$rollPercentD10",function(){var t=e;return t=this.randomizer.$roll_once(10),L(t,10)&&(t=0),t},0),g(c,"$getTotalLists",function(l,t){var $,n=e;return n=[],$=b(1,l.$abs()),H($,"times",[],function s(){var u,r=e;return u=(null==s.$$s?this:s.$$s).$rollPercentD10(),r=b(Z(u,10),t),L(r,0)&&(r=100),n.$push(r)},{$$arity:0,$$s:this}),n},2),g(c,"$getTotal",function(l,t){return _(x(t,0))?l.$min():l.$max()},2),g(c,"$getCheckResultText",function(l,t,i){var n;if(null==i&&(i=!1),_(B(l,t)))return L(l,1)?"\ub300\uc131\uacf5":_(B(l,T(t,5).$to_i()))?"\ub300\ub2e8\ud55c \uc131\uacf5":_(B(l,T(t,2).$to_i()))?"\uc5b4\ub824\uc6b4 \uc131\uacf5":"\ubcf4\ud1b5 \uc131\uacf5";if(n="\ub300\uc2e4\ud328",L(l,100))return n;if(_(x(l,96))){if(_(F(t,50)))return n;if(_(i))return n}return"\uc2e4\ud328"},-3),g(c,"$getCombineRoll",function(l){var t=this,i=e,n=e,$=e,s=e,a=e,u=e,r=e;return _(/CBR\((\d+),(\d+)\)/i["$=~"](l))?(i=v("Regexp").$last_match(1).$to_i(),n=v("Regexp").$last_match(2).$to_i(),$=t.randomizer.$roll_once(100),s=t.$getCheckResultText($,i),a=t.$getCheckResultText($,n),r=0,_((u=["\ub300\uc131\uacf5","\ub300\ub2e8\ud55c \uc131\uacf5","\uc5b4\ub824\uc6b4 \uc131\uacf5","\ubcf4\ud1b5\uc131\uacf5"])["$include?"](s))&&(r=b(r,1)),_(u["$include?"](a))&&(r=b(r,1)),t.$debug("succesCount",r),"(1d100<="+i+","+n+") \uff1e "+$+"["+s+","+a+"] \uff1e "+(_(x(r,2))?"\uc131\uacf5":L(r,1)?"\ubd80\ubd84\uc801 \uc131\uacf5":"\uc2e4\ud328")):e},1),g(c,"$getFullAutoResult",function(l){var t=this,i=e,n=e,$=e,s=e,a=e,u=e,r=e;return _(/^FAR\((-?\d+)(,(-?\d+))(,(-?\d+))(,(-?\d+))?\)/i["$=~"](l))?(i=v("Regexp").$last_match(1).$to_i(),n=v("Regexp").$last_match(3).$to_i(),$=v("Regexp").$last_match(5).$to_i(),s=(_(a=v("Regexp").$last_match(7))?a:0).$to_i(),u="",_(O(i,r=100))&&(u=b(u,"\n\ud0c4\uc57d\uc774 \ub108\ubb34 \ub9ce\uc2b5\ub2c8\ub2e4. \uc7a5\uc804\ub41c \ud0c4\uc57d\uc744 "+r+"\uac1c\ub85c \ubcc0\uacbd\ud569\ub2c8\ub2e4.\n"),i=r),_(B(i,0))?"\ud0c4\uc57d\uc740 1 \uc774\uc0c1\uc785\ub2c8\ub2e4.":_(B(n,0))?"\ubaa9\ud45c\uce58\ub294 1 \uc774\uc0c1\uc785\ub2c8\ub2e4.":(_(F($,0))&&(u=b(u,"\n\uace0\uc7a5 \ub118\ubc84\ub294 1 \uc774\uc0c1\uc785\ub2c8\ub2e4. \ub9c8\uc774\ub108\uc2a4 \uae30\ud638\ub97c \uc81c\uac70\ud569\ub2c8\ub2e4.\n"),$=$.$abs()),_(t.bonus_dice_range["$include?"](s))?(u=b(u,"\ubcf4\ub108\uc2a4, \ud328\ub110\ud2f0 \uc8fc\uc0ac\uc704 ["+s+"]"),u=b(u,t.$rollFullAuto(i,n,$,s))):"\n\uc5d0\ub7ec. \ubcf4\ub108\uc2a4, \ud328\ub110\ud2f0 \uc8fc\uc0ac\uc704\uc758 \uc218\uce58\ub294 "+t.bonus_dice_range.$min()+"~"+t.bonus_dice_range.$max()+"\uc785\ub2c8\ub2e4.")):e},1),g(c,"$rollFullAuto",function(l,t,i,n){try{var s=e,a=e,u=e;return s="",a=0,u=ee(["hit_bullet","impale_bullet","bullet"],{hit_bullet:0,impale_bullet:0,bullet:l}),H(E(0,3,!1),"each",[],function r(R){var h,y,C=null==r.$$s?this:r.$$s,z=e,N=e,G=e,Y=e,J=e,Q=e,d=e;for(null==C.bonus_dice_range&&(C.bonus_dice_range=e),null==R&&(R=e),s=b(s,C.$getNextDifficltyMessage(R));_(x(n,C.bonus_dice_range.$min()));)a=b(a,1),y=C.$getHitResultInfos(n,t,R),z=null==(h=S(y))[0]?e:h[0],N=null==h[1]?e:h[1],s=b(s,"\n"+a+"\ubc88\uc9f8: \uff1e "+(null==h[2]?e:h[2]).$join(", ")+" \uff1e "+z),_(x(N,i))&&(s=b(s," \ucd1d\uc54c \uac78\ub9bc"),o.ret(C.$getHitResultText(s,u))),G=C.$getHitType(R,z),y=C.$getBulletResults(u["$[]"]("bullet"),G,t),Y=null==(h=S(y))[0]?e:h[0],J=null==h[1]?e:h[1],Q=null==h[2]?e:h[2],d=["hit_bullet",b(u["$[]"]("hit_bullet"),Y)],H(u,"[]=",p(d)),k(d.length,1),d=["impale_bullet",b(u["$[]"]("impale_bullet"),J)],H(u,"[]=",p(d)),k(d.length,1),d=["bullet",k(u["$[]"]("bullet"),Q)],H(u,"[]=",p(d)),k(d.length,1),_(B(u["$[]"]("bullet"),0))&&o.ret(C.$getHitResultText(s,u)),n=k(n,1);return n=b(n,1)},{$$arity:1,$$s:this}),this.$getHitResultText(s,u)}catch(r){if(r===o.returner)return r.$v;throw r}},4),g(c,"$getHitResultInfos",function(l,t,i){var $,s,a,u,n=this;return $=n.$rollPercentD10(),s=n.$getTotalLists(l,$),a=n.$getTotal(s,l),u=n.$getFumbleable(i),[n.$getCheckResultText(a,t,u),a,s]},3),g(c,"$getHitResultText",function(l,t){return l+"\n\uff1e "+t["$[]"]("hit_bullet")+"\ubc1c\uc774 \uba85\uc911, "+t["$[]"]("impale_bullet")+"\ubc1c\uc774 \uad00\ud1b5, \uc794\ud0c4 "+t["$[]"]("bullet")+"\ubc1c"},2),g(c,"$getHitType",function(l,t){var i,n,a=e;return n=this.$getSuccessListImpaleBulletList(l),a=null==(i=S(n))[1]?e:i[1],_((null==i[0]?e:i[0])["$include?"](t))?"hit":_(a["$include?"](t))?"impale":""},2),g(c,"$getBulletResults",function(l,t,i){var $,s,n=this,a=e,u=e,r=e,R=e,D=e,h=e;return $=n.$getSetOfBullet(i),s=n.$getHitBulletCountBase(i,$),a=T($,2..$to_f()),u=0,r=0,R=0,te(n.$isLastBulletTurn(l,$))?(m("hit",D=t)?r=s:m("impale",D)&&(r=a.$floor(),R=a.$ceil()),u=$):(m("hit",D=t)?r=n.$getLastHitBulletCount(l):m("impale",D)&&(r=(h=T(l,2..$to_f())).$floor(),R=h.$ceil()),u=l),[r.$to_i(),R.$to_i(),u.$to_i()]},3),g(c,"$getSuccessListImpaleBulletList",function(l){var n,t=e,i=e;return t=[],i=[],m(0,n=l)?(t=["\uc5b4\ub824\uc6b4 \uc131\uacf5","\ubcf4\ud1b5 \uc131\uacf5"],i=["\ub300\uc131\uacf5","\ub300\ub2e8\ud55c \uc131\uacf5"]):m(1,n)?(t=["\uc5b4\ub824\uc6b4 \uc131\uacf5"],i=["\ub300\uc131\uacf5","\ub300\ub2e8\ud55c \uc131\uacf5"]):m(2,n)?(t=[],i=["\ub300\uc131\uacf5","\ub300\ub2e8\ud55c \uc131\uacf5"]):m(3,n)&&(t=["\ub300\uc131\uacf5"],i=[]),[t,i]},1),g(c,"$getNextDifficltyMessage",function(l){var t;return m(1,t=l)?"\n    \ub09c\uc774\ub3c4\uac00 \uc5b4\ub824\uc6b4 \uc131\uacf5\uc73c\ub85c \ubcc0\uacbd":m(2,t)?"\n    \ub09c\uc774\ub3c4\uac00 \ub300\ub2e8\ud55c \uc131\uacf5\uc73c\ub85c \ubcc0\uacbd":m(3,t)?"\n    \ub09c\uc774\ub3c4\uac00 \ub300\uc131\uacf5\uc73c\ub85c \ubcc0\uacbd":""},1),g(c,"$getSetOfBullet",function(l){var t=e;return t=T(l,10).$to_i(),_(x(l,1))&&_(F(l,10))&&(t=1),t},1),g(c,"$getHitBulletCountBase",function(l,t){var i=e;return i=T(t,2).$to_i(),_(x(l,1))&&_(F(l,10))&&(i=1),i},2),g(c,"$isLastBulletTurn",function(l,t){return F(k(l,t),0)},2),g(c,"$getLastHitBulletCount",function(l){return L(l,1)?1:T(l,2..$to_f()).$floor()},1),g(c,"$getFumbleable",function(l){return x(l,1)},1)})}}]);